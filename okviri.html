<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Podatkovni okviri i faktori | Programirajmo u R-u</title>
  <meta name="description" content="Udžbenik za predmet ‘Osnove statističkog programiranja’ na Fakultetu elektrotehnike i računarstva, Sveučilište u Zagrebu." />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Podatkovni okviri i faktori | Programirajmo u R-u" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Udžbenik za predmet ‘Osnove statističkog programiranja’ na Fakultetu elektrotehnike i računarstva, Sveučilište u Zagrebu." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Podatkovni okviri i faktori | Programirajmo u R-u" />
  
  <meta name="twitter:description" content="Udžbenik za predmet ‘Osnove statističkog programiranja’ na Fakultetu elektrotehnike i računarstva, Sveučilište u Zagrebu." />
  

<meta name="author" content="Damir Pintar" />


<meta name="date" content="2024-01-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="vektori.html"/>
<link rel="next" href="uvjet.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>

<style type="text/css">
.showopt {
  background-color: #004c93;
  color: #FFFFFF; 
  width: 140px;
  height: 4	0px;
  text-align: center;
  vertical-align: middle !important;
  float: right;
  font-family: sans-serif;
  font-size:10 pt;
  border-radius: 8px;
}

.showopt:hover {
    background-color: #dfe4f2;
    color: #004c93;
}

pre.plot {
  background-color: white !important;
}
</style>

<script>
 $(document).ready(function() {

  $chunks = $('.fold');

  $chunks.each(function () {

    // add button to source code chunks
    if ( $(this).hasClass('s') ) {
      $('pre.r', this).prepend("<div class=\"showopt\">Prikaži rješenje</div><br style=\"line-height:22px;\"/>");
      $('pre.r', this).children('code').attr('class', 'folded');
    }

    // add button to output chunks
    if ( $(this).hasClass('o') ) {
      $('pre:not(.r)', this).has('code').prepend("<div class=\"showopt\">Prikaži ispis</div><br style=\"line-height:22px;\"/>");
      $('pre:not(.r)', this).children('code:not(r)').addClass('folded');

      // add button to plots
      $(this).find('img').wrap('<pre class=\"plot\"></pre>');
      $('pre.plot', this).prepend("<div class=\"showopt\">Prikaži sliku</div><br style=\"line-height:22px;\"/>");
      $('pre.plot', this).children('img').addClass('folded');

    }
  });

  // hide all chunks when document is loaded
  $('.folded').css('display', 'none')

  // function to toggle the visibility
  $('.showopt').click(function() {
    var label = $(this).html();
    if (label.indexOf("Prikaži") >= 0) {
      $(this).html(label.replace("Prikaži", "Sakrij"));
    } else {
      $(this).html(label.replace("Sakrij", "Prikaži"));
    }
    $(this).siblings('code, img').slideToggle('fast', 'swing');
  });
});
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>(Udžbenik za predmet “Osnove statističkog programiranja”)</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#predgovor"><i class="fa fa-check"></i>Predgovor</a></li>
</ul></li>
<li class="part"><span><b>I Osnovni elementi jezika R</b></span></li>
<li class="chapter" data-level="1" data-path="uvod.html"><a href="uvod.html"><i class="fa fa-check"></i><b>1</b> Uvod</a>
<ul>
<li class="chapter" data-level="1.1" data-path="uvod.html"><a href="uvod.html#što-je-programski-jezik-r"><i class="fa fa-check"></i><b>1.1</b> Što je programski jezik R?</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="uvod.html"><a href="uvod.html#općenito-o-r-u"><i class="fa fa-check"></i><b>1.1.1</b> Općenito o R-u</a></li>
<li class="chapter" data-level="1.1.2" data-path="uvod.html"><a href="uvod.html#alternative-jeziku-r"><i class="fa fa-check"></i><b>1.1.2</b> Alternative jeziku R</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="uvod.html"><a href="uvod.html#instalacija-programske-podrške"><i class="fa fa-check"></i><b>1.2</b> Instalacija programske podrške</a></li>
<li class="chapter" data-level="1.3" data-path="uvod.html"><a href="uvod.html#pregled-razvojnog-sučelja-rstudio"><i class="fa fa-check"></i><b>1.3</b> Pregled razvojnog sučelja <em>RStudio</em></a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="uvod.html"><a href="uvod.html#interaktivna-konzola"><i class="fa fa-check"></i><b>1.3.1</b> Interaktivna konzola</a></li>
<li class="chapter" data-level="1.3.2" data-path="uvod.html"><a href="uvod.html#pisanje-r-skripti"><i class="fa fa-check"></i><b>1.3.2</b> Pisanje R skripti</a></li>
<li class="chapter" data-level="1.3.3" data-path="uvod.html"><a href="uvod.html#instalacija-dodatnih-paketa"><i class="fa fa-check"></i><b>1.3.3</b> Instalacija dodatnih paketa</a></li>
<li class="chapter" data-level="1.3.4" data-path="uvod.html"><a href="uvod.html#r-markdown"><i class="fa fa-check"></i><b>1.3.4</b> <em>R Markdown</em></a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="uvod.html"><a href="uvod.html#organizacija-procesa-podatkovne-analize-uz-r-i-rstudio"><i class="fa fa-check"></i><b>1.4</b> Organizacija procesa podatkovne analize uz R i RStudio</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="uvod.html"><a href="uvod.html#poželjne-karakteristike-procesa-analize-podataka"><i class="fa fa-check"></i><b>1.4.1</b> Poželjne karakteristike procesa analize podataka</a></li>
<li class="chapter" data-level="1.4.2" data-path="uvod.html"><a href="uvod.html#organizacija-mapa-za-potrebe-analize-podataka"><i class="fa fa-check"></i><b>1.4.2</b> Organizacija mapa za potrebe analize podataka</a></li>
<li class="chapter" data-level="1.4.3" data-path="uvod.html"><a href="uvod.html#pojam-projekta"><i class="fa fa-check"></i><b>1.4.3</b> Pojam projekta</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="uvod.html"><a href="uvod.html#kako-koristiti-ovaj-udžbenik"><i class="fa fa-check"></i><b>1.5</b> Kako koristiti ovaj udžbenik?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="tipovi.html"><a href="tipovi.html"><i class="fa fa-check"></i><b>2</b> Osnovni tipovi podataka</a>
<ul>
<li class="chapter" data-level="2.1" data-path="tipovi.html"><a href="tipovi.html#osnovni-tipovi-podataka"><i class="fa fa-check"></i><b>2.1</b> Osnovni tipovi podataka</a></li>
<li class="chapter" data-level="2.2" data-path="tipovi.html"><a href="tipovi.html#operatori"><i class="fa fa-check"></i><b>2.2</b> Operatori</a></li>
<li class="chapter" data-level="2.3" data-path="tipovi.html"><a href="tipovi.html#nedostajuće-nepoznate-i-nemoguće-vrijednosti"><i class="fa fa-check"></i><b>2.3</b> Nedostajuće, nepoznate i nemoguće vrijednosti</a></li>
<li class="chapter" data-level="" data-path="tipovi.html"><a href="tipovi.html#zadaci-za-vježbu"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="vektori.html"><a href="vektori.html"><i class="fa fa-check"></i><b>3</b> Vektori, matrice i liste</a>
<ul>
<li class="chapter" data-level="3.1" data-path="vektori.html"><a href="vektori.html#vektori-1"><i class="fa fa-check"></i><b>3.1</b> Vektori</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="vektori.html"><a href="vektori.html#stvaranje-vektora"><i class="fa fa-check"></i><b>3.1.1</b> Stvaranje vektora</a></li>
<li class="chapter" data-level="3.1.2" data-path="vektori.html"><a href="vektori.html#operator"><i class="fa fa-check"></i><b>3.1.2</b> Operator <code>[</code></a></li>
<li class="chapter" data-level="3.1.3" data-path="vektori.html"><a href="vektori.html#principi-vektorizacije-i-recikliranja"><i class="fa fa-check"></i><b>3.1.3</b> Principi vektorizacije i recikliranja</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="vektori.html"><a href="vektori.html#indeksni-vektori"><i class="fa fa-check"></i><b>3.2</b> Indeksni vektori</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="vektori.html"><a href="vektori.html#lokacijsko-referenciranje"><i class="fa fa-check"></i><b>3.2.1</b> Lokacijsko referenciranje</a></li>
<li class="chapter" data-level="3.2.2" data-path="vektori.html"><a href="vektori.html#uvjetno-referenciranje"><i class="fa fa-check"></i><b>3.2.2</b> Uvjetno referenciranje</a></li>
<li class="chapter" data-level="3.2.3" data-path="vektori.html"><a href="vektori.html#imensko-referenciranje"><i class="fa fa-check"></i><b>3.2.3</b> Imensko referenciranje</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="vektori.html"><a href="vektori.html#matrice-i-polja"><i class="fa fa-check"></i><b>3.3</b> Matrice i polja</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="vektori.html"><a href="vektori.html#rezanje-matrica"><i class="fa fa-check"></i><b>3.3.1</b> Rezanje matrica</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="vektori.html"><a href="vektori.html#liste"><i class="fa fa-check"></i><b>3.4</b> Liste</a></li>
<li class="chapter" data-level="" data-path="vektori.html"><a href="vektori.html#zadaci-za-vježbu-1"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="okviri.html"><a href="okviri.html"><i class="fa fa-check"></i><b>4</b> Podatkovni okviri i faktori</a>
<ul>
<li class="chapter" data-level="4.1" data-path="okviri.html"><a href="okviri.html#podatkovni-okviri"><i class="fa fa-check"></i><b>4.1</b> Podatkovni okviri</a></li>
<li class="chapter" data-level="4.2" data-path="okviri.html"><a href="okviri.html#odabir-redaka-i-stupaca-podatkovnih-okvira"><i class="fa fa-check"></i><b>4.2</b> Odabir redaka i stupaca podatkovnih okvira</a></li>
<li class="chapter" data-level="4.3" data-path="okviri.html"><a href="okviri.html#dodavanje-i-brisanje-redaka-i-stupaca"><i class="fa fa-check"></i><b>4.3</b> Dodavanje i brisanje redaka i stupaca</a></li>
<li class="chapter" data-level="4.4" data-path="okviri.html"><a href="okviri.html#faktori"><i class="fa fa-check"></i><b>4.4</b> Faktori</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="okviri.html"><a href="okviri.html#primjer-4.1---problem-automatske-kategorizacije"><i class="fa fa-check"></i><b>4.4.1</b> Primjer 4.1 - problem automatske kategorizacije</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="okviri.html"><a href="okviri.html#zadaci-za-vježbu-2"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="uvjet.html"><a href="uvjet.html"><i class="fa fa-check"></i><b>5</b> Uvjetne naredbe i petlje</a>
<ul>
<li class="chapter" data-level="5.1" data-path="uvjet.html"><a href="uvjet.html#naredbe-kontrole-toka"><i class="fa fa-check"></i><b>5.1</b> Naredbe kontrole toka</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="uvjet.html"><a href="uvjet.html#uvjetno-izvođenje-naredbi"><i class="fa fa-check"></i><b>5.1.1</b> Uvjetno izvođenje naredbi</a></li>
<li class="chapter" data-level="5.1.2" data-path="uvjet.html"><a href="uvjet.html#programske-petlje"><i class="fa fa-check"></i><b>5.1.2</b> Programske petlje</a></li>
<li class="chapter" data-level="5.1.3" data-path="uvjet.html"><a href="uvjet.html#petlja-repeat"><i class="fa fa-check"></i><b>5.1.3</b> Petlja <code>repeat</code></a></li>
<li class="chapter" data-level="5.1.4" data-path="uvjet.html"><a href="uvjet.html#petlja-while"><i class="fa fa-check"></i><b>5.1.4</b> Petlja <code>while</code></a></li>
<li class="chapter" data-level="5.1.5" data-path="uvjet.html"><a href="uvjet.html#petlja-for"><i class="fa fa-check"></i><b>5.1.5</b> Petlja <code>for</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="uvjet.html"><a href="uvjet.html#zadaci-za-vježbu-3"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="paketi.html"><a href="paketi.html"><i class="fa fa-check"></i><b>6</b> Paketi, ugrađene funkcije i okoline</a>
<ul>
<li class="chapter" data-level="6.1" data-path="paketi.html"><a href="paketi.html#rad-s-paketima"><i class="fa fa-check"></i><b>6.1</b> Rad s paketima</a></li>
<li class="chapter" data-level="6.2" data-path="paketi.html"><a href="paketi.html#ugrađene-funkcije"><i class="fa fa-check"></i><b>6.2</b> Ugrađene funkcije</a></li>
<li class="chapter" data-level="6.3" data-path="paketi.html"><a href="paketi.html#okoline"><i class="fa fa-check"></i><b>6.3</b> Okoline</a></li>
<li class="chapter" data-level="" data-path="paketi.html"><a href="paketi.html#zadaci-za-vježbu-4"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="korisnik.html"><a href="korisnik.html"><i class="fa fa-check"></i><b>7</b> Korisnički definirane funkcije</a>
<ul>
<li class="chapter" data-level="7.1" data-path="korisnik.html"><a href="korisnik.html#kako-definirati-funkciju"><i class="fa fa-check"></i><b>7.1</b> Kako definirati funkciju</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="korisnik.html"><a href="korisnik.html#princip-kopiranja-kod-izmjene-copy-on-modify"><i class="fa fa-check"></i><b>7.1.1</b> Princip “kopiranja kod izmjene” (copy-on-modify)</a></li>
<li class="chapter" data-level="7.1.2" data-path="korisnik.html"><a href="korisnik.html#funkcija-kao-objekt"><i class="fa fa-check"></i><b>7.1.2</b> Funkcija kao objekt</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="korisnik.html"><a href="korisnik.html#generičke-funkcije"><i class="fa fa-check"></i><b>7.2</b> Generičke funkcije</a></li>
<li class="chapter" data-level="7.3" data-path="korisnik.html"><a href="korisnik.html#što-su-apply-funkcije"><i class="fa fa-check"></i><b>7.3</b> Što su <code>apply</code> funkcije?</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="korisnik.html"><a href="korisnik.html#funkcija-apply"><i class="fa fa-check"></i><b>7.3.1</b> Funkcija <code>apply</code></a></li>
<li class="chapter" data-level="7.3.2" data-path="korisnik.html"><a href="korisnik.html#funkcije-lapply-sapply-i-vapply"><i class="fa fa-check"></i><b>7.3.2</b> Funkcije <code>lapply</code>, <code>sapply</code> i <code>vapply</code></a></li>
<li class="chapter" data-level="7.3.3" data-path="korisnik.html"><a href="korisnik.html#ostale-funkcije-iz-porodice-apply-i-dostupne-alternative"><i class="fa fa-check"></i><b>7.3.3</b> Ostale funkcije iz porodice <code>apply</code> i dostupne alternative</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="korisnik.html"><a href="korisnik.html#zadaci-za-vježbu-5"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="objekti.html"><a href="objekti.html"><i class="fa fa-check"></i><b>8</b> Objektni modeli</a>
<ul>
<li class="chapter" data-level="8.1" data-path="objekti.html"><a href="objekti.html#objektni-modeli-u-jeziku-r"><i class="fa fa-check"></i><b>8.1</b> Objektni modeli u jeziku R</a></li>
<li class="chapter" data-level="8.2" data-path="objekti.html"><a href="objekti.html#pomoćni-paket-sloop"><i class="fa fa-check"></i><b>8.2</b> Pomoćni paket <code>sloop</code></a></li>
<li class="chapter" data-level="8.3" data-path="objekti.html"><a href="objekti.html#pregled-objektnog-modela-s3"><i class="fa fa-check"></i><b>8.3</b> Pregled objektnog modela S3</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="objekti.html"><a href="objekti.html#konstruktorska-funkcija"><i class="fa fa-check"></i><b>8.3.1</b> Konstruktorska funkcija</a></li>
<li class="chapter" data-level="8.3.2" data-path="objekti.html"><a href="objekti.html#generičke-funkcije-1"><i class="fa fa-check"></i><b>8.3.2</b> Generičke funkcije</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="objekti.html"><a href="objekti.html#implementacija-generičke-funkcije"><i class="fa fa-check"></i><b>8.4</b> Implementacija generičke funkcije</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="objekti.html"><a href="objekti.html#funkcija-methods"><i class="fa fa-check"></i><b>8.4.1</b> Funkcija <code>methods</code></a></li>
<li class="chapter" data-level="8.4.2" data-path="objekti.html"><a href="objekti.html#zaključci-o-s3-objektima"><i class="fa fa-check"></i><b>8.4.2</b> Zaključci o S3 objektima</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="objekti.html"><a href="objekti.html#kratki-pregled-s4-objekata"><i class="fa fa-check"></i><b>8.5</b> Kratki pregled S4 objekata</a></li>
<li class="chapter" data-level="" data-path="objekti.html"><a href="objekti.html#zadaci-za-vježbu-6"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="part"><span><b>II Upravljanje podacima i vizualizacije</b></span></li>
<li class="chapter" data-level="9" data-path="cijev.html"><a href="cijev.html"><i class="fa fa-check"></i><b>9</b> Koncept urednih podataka</a>
<ul>
<li class="chapter" data-level="9.1" data-path="cijev.html"><a href="cijev.html#operator-cjevovoda"><i class="fa fa-check"></i><b>9.1</b> Operator cjevovoda</a></li>
<li class="chapter" data-level="9.2" data-path="cijev.html"><a href="cijev.html#uredni-podaci"><i class="fa fa-check"></i><b>9.2</b> Uredni podaci</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="cijev.html"><a href="cijev.html#funkcije-pivot_longer-i-pivot_wider"><i class="fa fa-check"></i><b>9.2.1</b> Funkcije <code>pivot_longer</code> i <code>pivot_wider</code></a></li>
<li class="chapter" data-level="9.2.2" data-path="cijev.html"><a href="cijev.html#funkcije-separate-i-unite"><i class="fa fa-check"></i><b>9.2.2</b> Funkcije <code>separate</code> i <code>unite</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="cijev.html"><a href="cijev.html#zadaci-za-vježbu-7"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="datumi.html"><a href="datumi.html"><i class="fa fa-check"></i><b>10</b> Rad sa vremenskim podacima</a>
<ul>
<li class="chapter" data-level="10.1" data-path="datumi.html"><a href="datumi.html#rad-sa-datumima"><i class="fa fa-check"></i><b>10.1</b> Rad sa datumima</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="datumi.html"><a href="datumi.html#klasa-date"><i class="fa fa-check"></i><b>10.1.1</b> Klasa <code>Date</code></a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="datumi.html"><a href="datumi.html#klase-posixct-i-posixlt"><i class="fa fa-check"></i><b>10.2</b> Klase <code>POSIXct</code> i <code>POSIXlt</code></a></li>
<li class="chapter" data-level="10.3" data-path="datumi.html"><a href="datumi.html#paket-lubridate"><i class="fa fa-check"></i><b>10.3</b> Paket <code>lubridate</code></a></li>
<li class="chapter" data-level="" data-path="datumi.html"><a href="datumi.html#zadaci-za-vježbu-8"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="nizovi.html"><a href="nizovi.html"><i class="fa fa-check"></i><b>11</b> Obrada znakovnih nizova</a>
<ul>
<li class="chapter" data-level="11.1" data-path="nizovi.html"><a href="nizovi.html#rad-sa-znakovnim-nizovima"><i class="fa fa-check"></i><b>11.1</b> Rad sa znakovnim nizovima</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="nizovi.html"><a href="nizovi.html#analiza-teksta-i-regularni-izrazi"><i class="fa fa-check"></i><b>11.1.1</b> Analiza teksta i regularni izrazi</a></li>
<li class="chapter" data-level="11.1.2" data-path="nizovi.html"><a href="nizovi.html#paket-stringr"><i class="fa fa-check"></i><b>11.1.2</b> Paket <code>stringr</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="nizovi.html"><a href="nizovi.html#zadaci-za-vježbu-9"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><i class="fa fa-check"></i><b>12</b> Prilagodba podatkovnih skupova uz paket <code>dplyr</code></a>
<ul>
<li class="chapter" data-level="12.1" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html#ogledni-podatkovni-skup-titanic"><i class="fa fa-check"></i><b>12.1</b> Ogledni podatkovni skup: <em>Titanic</em></a></li>
<li class="chapter" data-level="12.2" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html#stvaranje-podskupa-obzervacija-uz-filter-i-slice"><i class="fa fa-check"></i><b>12.2</b> Stvaranje podskupa obzervacija uz <code>filter</code> i <code>slice</code></a></li>
<li class="chapter" data-level="12.3" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html#stvaranje-podskupa-varijabli-uz-select"><i class="fa fa-check"></i><b>12.3</b> Stvaranje podskupa varijabli uz <code>select</code></a></li>
<li class="chapter" data-level="12.4" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html#stvaranje-novih-stupaca-uz-mutate"><i class="fa fa-check"></i><b>12.4</b> Stvaranje novih stupaca uz <code>mutate</code></a></li>
<li class="chapter" data-level="12.5" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html#ogledni-podatkovni-skup-houston-flights"><i class="fa fa-check"></i><b>12.5</b> Ogledni podatkovni skup: <em>Houston flights</em></a></li>
<li class="chapter" data-level="12.6" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html#grupiranje-i-agregacija-uz-group_by-i-summarise"><i class="fa fa-check"></i><b>12.6</b> Grupiranje i agregacija uz <code>group_by</code> i <code>summarise</code></a></li>
<li class="chapter" data-level="12.7" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html#spajanje-podatkovnih-okvira-uz-join-funkcije"><i class="fa fa-check"></i><b>12.7</b> Spajanje podatkovnih okvira uz join funkcije</a></li>
<li class="chapter" data-level="12.8" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html#integracija-sa-vanjskim-izvorima-podataka"><i class="fa fa-check"></i><b>12.8</b> Integracija sa vanjskim izvorima podataka</a>
<ul>
<li class="chapter" data-level="12.8.1" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html#excel-datoteka-kao-izvor-odredište-podataka"><i class="fa fa-check"></i><b>12.8.1</b> Excel datoteka kao izvor (odredište) podataka</a></li>
<li class="chapter" data-level="12.8.2" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html#rad-sa-relacijskim-bazama"><i class="fa fa-check"></i><b>12.8.2</b> Rad sa relacijskim bazama</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html"><a href="prilagodba-podatkovnih-skupova-uz-paket-dplyr.html#zadaci-za-vježbu-10"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>13</b> Vizualizacija podataka uz paket <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="13.1" data-path="ggplot2.html"><a href="ggplot2.html#eksploratorna-analiza-podataka"><i class="fa fa-check"></i><b>13.1</b> Eksploratorna analiza podataka</a></li>
<li class="chapter" data-level="13.2" data-path="ggplot2.html"><a href="ggplot2.html#vizualizacija-podataka-uz-pomoć-jezika-r"><i class="fa fa-check"></i><b>13.2</b> Vizualizacija podataka uz pomoć jezika R</a></li>
<li class="chapter" data-level="13.3" data-path="ggplot2.html"><a href="ggplot2.html#grafička-gramatika-i-paket-ggplot2"><i class="fa fa-check"></i><b>13.3</b> Grafička gramatika i paket <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="ggplot2.html"><a href="ggplot2.html#aspekti-podataka-estetike-i-geometrije"><i class="fa fa-check"></i><b>13.3.1</b> Aspekti podataka, estetike i geometrije</a></li>
<li class="chapter" data-level="13.3.2" data-path="ggplot2.html"><a href="ggplot2.html#fiksni-parametri-geometrije"><i class="fa fa-check"></i><b>13.3.2</b> Fiksni parametri geometrije</a></li>
<li class="chapter" data-level="13.3.3" data-path="ggplot2.html"><a href="ggplot2.html#aspekti-statistike-i-pozicije"><i class="fa fa-check"></i><b>13.3.3</b> Aspekti statistike i pozicije</a></li>
<li class="chapter" data-level="13.3.4" data-path="ggplot2.html"><a href="ggplot2.html#povezanost-geometrije-i-statistike"><i class="fa fa-check"></i><b>13.3.4</b> Povezanost geometrije i statistike</a></li>
<li class="chapter" data-level="13.3.5" data-path="ggplot2.html"><a href="ggplot2.html#aspekti-skale-koordinatnog-sustava-i-teme"><i class="fa fa-check"></i><b>13.3.5</b> Aspekti skale, koordinatnog sustava i teme</a></li>
<li class="chapter" data-level="13.3.6" data-path="ggplot2.html"><a href="ggplot2.html#uvjetni-facetirani-grafovi"><i class="fa fa-check"></i><b>13.3.6</b> Uvjetni (facetirani) grafovi</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="ggplot2.html"><a href="ggplot2.html#grafovi-u-eksploratornoj-analizi-i-izvještavanju"><i class="fa fa-check"></i><b>13.4</b> Grafovi u eksploratornoj analizi i izvještavanju</a></li>
<li class="chapter" data-level="" data-path="ggplot2.html"><a href="ggplot2.html#zadaci-za-vježbu-11"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="part"><span><b>III Statistika i strojno učenje u jeziku R</b></span></li>
<li class="chapter" data-level="14" data-path="razdiobe.html"><a href="razdiobe.html"><i class="fa fa-check"></i><b>14</b> Razdiobe i simulacije</a>
<ul>
<li class="chapter" data-level="14.1" data-path="razdiobe.html"><a href="razdiobe.html#rad-sa-razdiobama-vjerojatnosti-u-jeziku-r"><i class="fa fa-check"></i><b>14.1</b> Rad sa razdiobama vjerojatnosti u jeziku R</a></li>
<li class="chapter" data-level="14.2" data-path="razdiobe.html"><a href="razdiobe.html#binomna-razdioba"><i class="fa fa-check"></i><b>14.2</b> Binomna razdioba</a></li>
<li class="chapter" data-level="14.3" data-path="razdiobe.html"><a href="razdiobe.html#normalna-razdioba"><i class="fa fa-check"></i><b>14.3</b> Normalna razdioba</a></li>
<li class="chapter" data-level="14.4" data-path="razdiobe.html"><a href="razdiobe.html#generiranje-nasumičnih-opservacija"><i class="fa fa-check"></i><b>14.4</b> Generiranje nasumičnih opservacija</a></li>
<li class="chapter" data-level="14.5" data-path="razdiobe.html"><a href="razdiobe.html#procjenu-funkcije-gustoće-razdiobe-i-kvantil-kvantil-graf"><i class="fa fa-check"></i><b>14.5</b> Procjenu funkcije gustoće razdiobe i kvantil-kvantil graf</a></li>
<li class="chapter" data-level="14.6" data-path="razdiobe.html"><a href="razdiobe.html#monte-carlo-simulacije"><i class="fa fa-check"></i><b>14.6</b> Monte Carlo Simulacije</a></li>
<li class="chapter" data-level="" data-path="razdiobe.html"><a href="razdiobe.html#zadaci-za-vježbu-12"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="part"><span><b>IV Strojno učenje i prediktivna analitika</b></span></li>
<li class="chapter" data-level="15" data-path="regresija.html"><a href="regresija.html"><i class="fa fa-check"></i><b>15</b> Odabrane metode strojnog učenja: regresijska analiza</a>
<ul>
<li class="chapter" data-level="15.1" data-path="regresija.html"><a href="regresija.html#strojno-učenje"><i class="fa fa-check"></i><b>15.1</b> Strojno učenje</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="regresija.html"><a href="regresija.html#jednostavna-linearna-regresija"><i class="fa fa-check"></i><b>15.1.1</b> Jednostavna linearna regresija</a></li>
<li class="chapter" data-level="15.1.2" data-path="regresija.html"><a href="regresija.html#funkcija-lm"><i class="fa fa-check"></i><b>15.1.2</b> Funkcija <code>lm</code></a></li>
<li class="chapter" data-level="15.1.3" data-path="regresija.html"><a href="regresija.html#linearna-regresija-i-kategorijske-varijable"><i class="fa fa-check"></i><b>15.1.3</b> Linearna regresija i kategorijske varijable</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="regresija.html"><a href="regresija.html#višestruka-multipla-linearna-regresija"><i class="fa fa-check"></i><b>15.2</b> Višestruka (multipla) linearna regresija</a></li>
<li class="chapter" data-level="" data-path="regresija.html"><a href="regresija.html#zadaci-za-vježbu-13"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="prediktivno_modeliranje.html"><a href="prediktivno_modeliranje.html"><i class="fa fa-check"></i><b>16</b> Uvod u prediktivno modeliranje</a>
<ul>
<li class="chapter" data-level="16.1" data-path="prediktivno_modeliranje.html"><a href="prediktivno_modeliranje.html#što-je-prediktivno-modeliranje"><i class="fa fa-check"></i><b>16.1</b> Što je prediktivno modeliranje?</a></li>
<li class="chapter" data-level="16.2" data-path="prediktivno_modeliranje.html"><a href="prediktivno_modeliranje.html#podaci-za-treniranje-i-testiranje-modela"><i class="fa fa-check"></i><b>16.2</b> Podaci za treniranje i testiranje modela</a></li>
<li class="chapter" data-level="16.3" data-path="prediktivno_modeliranje.html"><a href="prediktivno_modeliranje.html#klasifikacijski-prediktivni-modeli---knn-klasifikacija"><i class="fa fa-check"></i><b>16.3</b> Klasifikacijski prediktivni modeli - kNN klasifikacija</a></li>
<li class="chapter" data-level="16.4" data-path="prediktivno_modeliranje.html"><a href="prediktivno_modeliranje.html#paket-caret-i-prediktivno-modeliranje"><i class="fa fa-check"></i><b>16.4</b> Paket <code>caret</code> i prediktivno modeliranje</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Programirajmo u R-u</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="okviri" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">4</span> Podatkovni okviri i faktori<a href="okviri.html#okviri" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<hr />
<div id="podatkovni-okviri" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Podatkovni okviri<a href="okviri.html#podatkovni-okviri" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Kao što je već rečeno, podatkovni okvir je daleko najpopularniji element programskog jezika R. Jezik R predviđen je primarno analizi podataka, a podatkovni okvir zapravo predstavlja objektnu reprezentaciju podatkovnog skupa kojeg namjeravamo analizirati. Drugim riječima, podatkovni okvir je objekt slične funkcije kao tablica u <em>Microsoft Excel</em>-u ili relacijskoj bazi podataka. Gotovo svaka “sesija” u R-u svodi se na manipuliranje podatkovnim okvirima - no dok u <em>Excel</em>-u tablicom upravljamo uz pomoć grafičkog sučelja, a u bazi uz pomoć upitnog jezika <em>SQL</em>, u R-u podatkovnim okvirima upravljamo gotovo isključivo programski.</p>
<p>Uzmimo za primjer sljedeću tablicu:</p>
<table>
<thead>
<tr class="header">
<th>pbr</th>
<th>nazivMjesta</th>
<th>prosjPlacaKn</th>
<th>brojStanovnika</th>
<th>prirez</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>10000</td>
<td>Zagreb</td>
<td>6359.00</td>
<td>790017</td>
<td>18</td>
</tr>
<tr class="even">
<td>51000</td>
<td>Rijeka</td>
<td>5418.00</td>
<td>128384</td>
<td>15</td>
</tr>
<tr class="odd">
<td>21000</td>
<td>Split</td>
<td>5170.00</td>
<td>167121</td>
<td>10</td>
</tr>
<tr class="even">
<td>31000</td>
<td>Osijek</td>
<td>4892.00</td>
<td>84104</td>
<td>13</td>
</tr>
<tr class="odd">
<td>20000</td>
<td>Dubrovnik</td>
<td>5348.00</td>
<td>28434</td>
<td>10</td>
</tr>
</tbody>
</table>
<p>Ovdje se radi o podatkovnom skupu koji sadržava određene parametre vezane uz gradove u Republici Hrvatskoj (navedene vrijednosti ne odgovaraju nužno trenutnom stanju već ih koristimo samo za demonstraciju). Lako možemo zamisliti kako ove podatke zapisujemo u <em>Excel</em> ili stvaramo relacijsku tablicu naziva npr. MJESTO u koju onda pohranjujemo navedene podatke. Pokažimo sada kako bi sa istim podacima manipulirati u sklopu jezika R, tj. pokušajmo stvoriti podatkovni okvir koji će sadržavati ove podatke.</p>
<hr />
<p>U prošloj lekciji smo napomenuli da je lista kao složeni tip zapravo svojevrsni “predložak” uz pomoć kojeg možemo raditi nove objekte. Podatkovni okvir tako zapravo nije ništa drugo nego lista – tj. “spremnik” koji može sadržavati u sebi druge spremnike podataka različitog tipa. No dok je “lista“ zapravo <em>univerzalni</em> spremnik, tj. nemamo ograničenja što”trpamo” u nju, podatkovni okvir ima određene restrikcije.</p>
<p>Najvažnije ograničenje koje podatkovni okvir nameće jest da <strong>svaki element unutar podatkovnog okvira mora imati isti broj elemenata</strong>. Zašto je tome tako? Zamislimo listu u kojoj svaki element ima isti broj podelemenata. Ako svaki element skiciramo vertikalno, sa podelementima napisanim jedan ispod drugog, onda će ti podelementi biti “poravnati” po retcima čime smo postigli klasičnu organizaciju podataka u stupce (elemente liste) i retke (poravnati podelementi). Dakle, ova restrikcija zapravo direktno nameće “tabličnu” ili “matričnu” strukturu liste sa jasno definiranim retcima i stupcima, što nam zapravo omogućuje da podatkovnim okvirom upravljamo i uz pomoć metoda vezanih uz liste, ali i uz pomoć metoda primarno namijenjenih matricama.</p>
<hr />
<p>Postoji više načina stvaranja podatkovnih okvira, a mi ćemo prikazati dva u praksi najčešće susretana scenarija:</p>
<ul>
<li>programsko stvaranje uz pomoć funkcije <code>data.frame</code></li>
<li>učitavanje podataka iz vanjskog izvora uz pomoć funkcije <code>read.csv</code></li>
</ul>
<p>Prikažimo oba slučaja. Prvo ćemo stvoriti podatkovni okvir programski.</p>
<hr />
<p><strong>Zadatak 4.1 - programsko stvaranje podatkovnog okvira</strong></p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="okviri.html#cb127-1" tabindex="-1"></a>mjesto <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">pbr =</span> <span class="fu">c</span>(<span class="dv">10000</span>, <span class="dv">51000</span>, <span class="dv">21000</span>, <span class="dv">31000</span>, <span class="dv">2000</span>),</span>
<span id="cb127-2"><a href="okviri.html#cb127-2" tabindex="-1"></a>    <span class="at">nazivMjesta =</span> <span class="fu">c</span>(<span class="st">&quot;Zagreb&quot;</span>, <span class="st">&quot;Rijeka&quot;</span>, <span class="st">&quot;Split&quot;</span>, <span class="st">&quot;Osijek&quot;</span>, <span class="st">&quot;Dubrovnik&quot;</span>),</span>
<span id="cb127-3"><a href="okviri.html#cb127-3" tabindex="-1"></a>    <span class="at">prosjPlacaKn =</span> <span class="fu">c</span>(<span class="fl">6359.</span>, <span class="fl">5418.</span>, <span class="fl">5170.</span>, <span class="fl">4892.</span>, <span class="fl">5348.</span>),</span>
<span id="cb127-4"><a href="okviri.html#cb127-4" tabindex="-1"></a>    <span class="at">brojStanovnika =</span> <span class="fu">c</span>(<span class="dv">790017</span>, <span class="dv">128384</span>, <span class="dv">167121</span>, <span class="dv">84104</span>, <span class="dv">28434</span>),</span>
<span id="cb127-5"><a href="okviri.html#cb127-5" tabindex="-1"></a>    <span class="at">prirez =</span> <span class="fu">c</span>(<span class="dv">18</span>, <span class="dv">15</span>, <span class="dv">10</span>, <span class="dv">13</span>, <span class="dv">10</span>))</span>
<span id="cb127-6"><a href="okviri.html#cb127-6" tabindex="-1"></a></span>
<span id="cb127-7"><a href="okviri.html#cb127-7" tabindex="-1"></a></span>
<span id="cb127-8"><a href="okviri.html#cb127-8" tabindex="-1"></a><span class="co"># ispišite podatkovni okvir `mjesto`</span></span></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="okviri.html#cb128-1" tabindex="-1"></a>mjesto <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">pbr =</span> <span class="fu">c</span>(<span class="dv">10000</span>, <span class="dv">51000</span>, <span class="dv">21000</span>, <span class="dv">31000</span>, <span class="dv">2000</span>),</span>
<span id="cb128-2"><a href="okviri.html#cb128-2" tabindex="-1"></a>    <span class="at">nazivMjesta =</span> <span class="fu">c</span>(<span class="st">&quot;Zagreb&quot;</span>, <span class="st">&quot;Rijeka&quot;</span>, <span class="st">&quot;Split&quot;</span>, <span class="st">&quot;Osijek&quot;</span>, <span class="st">&quot;Dubrovnik&quot;</span>),</span>
<span id="cb128-3"><a href="okviri.html#cb128-3" tabindex="-1"></a>    <span class="at">prosjPlacaKn =</span> <span class="fu">c</span>(<span class="fl">6359.</span>, <span class="fl">5418.</span>, <span class="fl">5170.</span>, <span class="fl">4892.</span>, <span class="fl">5348.</span>),</span>
<span id="cb128-4"><a href="okviri.html#cb128-4" tabindex="-1"></a>    <span class="at">brojStanovnika =</span> <span class="fu">c</span>(<span class="dv">790017</span>, <span class="dv">128384</span>, <span class="dv">167121</span>, <span class="dv">84104</span>, <span class="dv">28434</span>),</span>
<span id="cb128-5"><a href="okviri.html#cb128-5" tabindex="-1"></a>    <span class="at">prirez =</span> <span class="fu">c</span>(<span class="dv">18</span>, <span class="dv">15</span>, <span class="dv">10</span>, <span class="dv">13</span>, <span class="dv">10</span>))</span>
<span id="cb128-6"><a href="okviri.html#cb128-6" tabindex="-1"></a></span>
<span id="cb128-7"><a href="okviri.html#cb128-7" tabindex="-1"></a></span>
<span id="cb128-8"><a href="okviri.html#cb128-8" tabindex="-1"></a><span class="co"># ispišite podatkovni okvir `mjesto`</span></span>
<span id="cb128-9"><a href="okviri.html#cb128-9" tabindex="-1"></a>mjesto</span></code></pre></div>
<pre><code>##     pbr nazivMjesta prosjPlacaKn brojStanovnika prirez
## 1 10000      Zagreb         6359         790017     18
## 2 51000      Rijeka         5418         128384     15
## 3 21000       Split         5170         167121     10
## 4 31000      Osijek         4892          84104     13
## 5  2000   Dubrovnik         5348          28434     10</code></pre>
</div>
<hr />
<p>Ukoliko želite, pokušajte ponovo stvoriti gornji podatkovni okvir ali uz različite brojeve elemenata vektora koji čine stupce. Ova operacija rezultirati će greškom uz prikladnu poruku a podatkovni okvir neće biti stvoren - R se trudi da matrična priroda okvira uvijek bude očuvana.</p>
<p>Mala napomena glede terminologije: u nastavku ćemo zbog jednostavnosti “podatkovni okvir” često zvati jednostavno “okvir” ili “tablica”. Isto tako, često ćemo za elemente podatkovnog okvira jednakopravno koristiti izraze “stupac”, “varijabla” ili “atribut”, dok ćemo paralelne podelemente elemenata okvira nazivati “retcima” ili “obzervacijama”. Ovi termini u skladu su sa standardnim načinom referenciranja elemenata tablice te statističkim terminima koji se odnose na tablične podatkovne skupove. Ukoliko iz konteksta postoji šansa za dvosmislenost, koristiti će se onaj termin koji jasno opisuje element koji se referencira.</p>
<hr />
<p>Pokušajmo sada učitati tablicu iz vanjskog izvora. Iako R dopušta različite oblike “vanjskih” podataka, mi ćemo pretpostaviti da podatke dobivamo u tzv. “CSV obliku” (engl. CSV - <em>comma-separated values</em>). Ovaj oblik jedan je od najpopularnijih načina pohrane podataka u čistom tekstualnom obliku koji ima prednosti da se lako izrađuje ručno, a većina alata za upravljanje podacima implementira i logiku za izvoz podataka u obliku CSV datoteke.</p>
<p>U nastavku možemo vidjeti primjer CSV datoteke koja odgovara podatkovnom okviru izrađenom u prethodnom primjeru. Pretpostavimo da se datoteka zove <code>mjesto.csv</code>. Podaci su odvojeni zarezom (bez razmaknice!), svaka obzervacija u svojem retku, a opcionalni prvi redak predstavlja nazive stupaca.</p>
<hr />
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="okviri.html#cb130-1" tabindex="-1"></a>pbr,nazivMjesta,prosjPlacaKn,brojStanovnika,prirez</span>
<span id="cb130-2"><a href="okviri.html#cb130-2" tabindex="-1"></a><span class="dv">10000</span>,Zagreb,<span class="fl">6359.00</span>,<span class="dv">790017</span>,<span class="dv">18</span> </span>
<span id="cb130-3"><a href="okviri.html#cb130-3" tabindex="-1"></a><span class="dv">51000</span>,Rijeka,<span class="fl">5418.00</span>,<span class="dv">128384</span>,<span class="dv">15</span></span>
<span id="cb130-4"><a href="okviri.html#cb130-4" tabindex="-1"></a><span class="dv">21000</span>,Split,<span class="fl">5170.00</span>,<span class="dv">167121</span>,<span class="dv">10</span></span>
<span id="cb130-5"><a href="okviri.html#cb130-5" tabindex="-1"></a><span class="dv">31000</span>,Osijek,<span class="fl">4892.00</span>,<span class="dv">84104</span>,<span class="dv">13</span> </span>
<span id="cb130-6"><a href="okviri.html#cb130-6" tabindex="-1"></a><span class="dv">20000</span>,Dubrovnik,<span class="fl">5348.00</span>,<span class="dv">28434</span>,<span class="dv">10</span></span></code></pre></div>
<hr />
<p>Jedan od potencijalnih problema sa CSV datotekama jest taj što one koriste zarez kao razdvojnik (<em>delimiter</em>) elemenata zapisa, a na određenim govornim područjima kao standard se umjesto decimalne točke koristi upravo “decimalni zarez”. Zbog ove činjenice postoji i “alternativni” CSV standard koji kao razdvojnik koristi “točku-zarez”, tako da bi naša CSV datoteka u tom slučaju izgledala ovako (nazovimo ju <code>mjestoAlt.csv</code>):</p>
<hr />
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="okviri.html#cb131-1" tabindex="-1"></a>pbr;nazivMjesta;prosjPlacaKn;brojStanovnika;prirez</span>
<span id="cb131-2"><a href="okviri.html#cb131-2" tabindex="-1"></a><span class="dv">10000</span>;Zagreb;<span class="dv">6359</span>,<span class="dv">00</span>;<span class="dv">790017</span>;<span class="dv">18</span> </span>
<span id="cb131-3"><a href="okviri.html#cb131-3" tabindex="-1"></a><span class="dv">51000</span>;Rijeka;<span class="dv">5418</span>,<span class="dv">00</span>;<span class="dv">128384</span>;<span class="dv">15</span></span>
<span id="cb131-4"><a href="okviri.html#cb131-4" tabindex="-1"></a><span class="dv">21000</span>;Split;<span class="dv">5170</span>,<span class="dv">00</span>;<span class="dv">167121</span>;<span class="dv">10</span></span>
<span id="cb131-5"><a href="okviri.html#cb131-5" tabindex="-1"></a><span class="dv">31000</span>;Osijek;<span class="dv">4892</span>,<span class="dv">00</span>;<span class="dv">84104</span>;<span class="dv">13</span> </span>
<span id="cb131-6"><a href="okviri.html#cb131-6" tabindex="-1"></a><span class="dv">20000</span>;Dubrovnik;<span class="dv">5348</span>,<span class="dv">00</span>;<span class="dv">28434</span>;<span class="dv">10</span></span></code></pre></div>
<hr />
<p>Obzirom da je “decimalni zarez” propisani standard i na području Republike Hrvatske, u radu sa CSV datotekama moramo biti oprezni koji od dva standarda zapisa se koristi. Na sreću, jezik R nudi funkcije za podršku oba standarda, tako da ne moramo posebno prilagođavati ulazne datoteke, tek biti oprezni koju funkciju ćemo odabrati.</p>
<p>Pretpostavimo da u radnoj mapi imamo ove dvije datoteke:</p>
<ul>
<li><code>mjesto.csv</code></li>
<li><code>mjestoAlt.csv</code></li>
</ul>
<p>Ukoliko nemamo dostupne ove datoteke lako ih možemo samostalno napraviti uz pomoć običnog uređivača teksta (npr. <em>Notepad</em> ili <em>gedit</em>) i kopiranja gore navedenih redaka.</p>
<hr />
<p>Za stvaranje podatkovnih okvira iz CSV datoteka R nudi sljedeće funkcije:
- <code>read.csv</code> - za “normalne” CSV datoteke sa zarezom kao razdvojnikom
- <code>read.csv2</code> - za alternativni CSV standard koji koristi točku-zarez</p>
<p>Osnovni parametar ovih funkcija je staza do CSV datoteke koju učitavamo. Funkcije imaju i bogati niz dodatnih parametara koje omogućuju prilagodbu raznim scenarijima, a ukoliko smo dobili neki od “egzotičnijih” oblika CSV datoteke, isplati se pogledati i funkciju <code>read.table</code> koja je vrlo fleksibilna glede broja različitih parametara i postavki kod učitavanja podataka (<code>read.csv</code> i <code>read.csv2</code> su zapravo izvedene iz funkcije <code>read.table</code> fiksiranjem određenih parametara na standardne CSV značajke).</p>
<hr />
<p>Iako ćemo “naprednije” funkcije iz kolekcije <code>tidyverse</code> učiti u jednoj od narednih lekcija, u ovom trenutku nije loše odmah predstaviti alternative prikazanim funkcijama iz paketa <code>readr</code>. Funkcije za čitanje iz tabularnih datoteka vrlo su slične funkcionalnosti osnovnim funkcijama, a po nazivu se uglavnom razlikuju u tome što koriste simbol “podcrte” <code>_</code> umjesto “točke” <code>.</code>, pa za CSV datoteke imamo:</p>
<ul>
<li><code>read_csv</code> - za “normalne” CSV datoteke sa zarezom kao razdvojnikom</li>
<li><code>read_csv2</code> - za alternativni CSV standard koji koristi točku-zarez</li>
</ul>
<p>Postoji niz razloga zašto su ove funkcije preferirane, no ovu raspravu ćemo odgoditi za kasnije, dok ćemo se sada usredotočiti na način njihovog korištenja.</p>
<hr />
<p>Neke od parametara i pripadajućih vrijednosti funkcija <code>read.csv</code> (ili <code>read.table</code>) koje je korisno znati su:</p>
<ul>
<li><code>col_names = FALSE</code> - za datoteke bez zaglavlja</li>
<li><code>col_types = "ccnlf"</code> - za eksplicitnu definiciju tipova; prikazana je skraćena sintaksa za primjer od pet stupaca koja označava <em>character-character-numeric-logical-factor</em></li>
<li><code>delim = "#"</code> - za datoteke koje koriste “egzotični” razdvojnik, u ovom slučaju <code>#</code></li>
<li><code>na = "NULL"</code> - naznaka koji standard podaci koriste za reprezentaciju nedostajućih vrijednosti a koji će u R-u postati <code>NA</code></li>
<li><code>n_max = 2000</code> - maksimalan broj redaka koji će se pročitati, u ovom slučaju 2000</li>
</ul>
<p>Ostale parametre možemo lako pronaći traženjem pomoći za odabranu naredbu.</p>
<p>Pokušajmo sada učitati podatke iz dostupnih CSV datoteka. Ovi podaci neće zahtijevati posebne parametre te će se moći učitati samo pružanjem staze do pripadnih datoteka (jedne koja koristi zarez i druge koja koristi točku-zarez kao razdvojnik).</p>
<hr />
<p><strong>Zadatak 4.2 - čitanje podataka iz CSV datoteke</strong></p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="okviri.html#cb132-1" tabindex="-1"></a><span class="co"># učitajte podatke iz datoteka `mjesto.csv` i `mjestoAlt.csv`</span></span>
<span id="cb132-2"><a href="okviri.html#cb132-2" tabindex="-1"></a><span class="co"># podatke spremite u okvire `mjesto2` i `mjesto3`</span></span>
<span id="cb132-3"><a href="okviri.html#cb132-3" tabindex="-1"></a></span>
<span id="cb132-4"><a href="okviri.html#cb132-4" tabindex="-1"></a><span class="co"># ispišite okvire `mjesto2` i `mjesto3`</span></span></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="okviri.html#cb133-1" tabindex="-1"></a><span class="co"># učitajte podatke iz datoteka `mjesto.csv` i `mjestoAlt.csv`</span></span>
<span id="cb133-2"><a href="okviri.html#cb133-2" tabindex="-1"></a><span class="co"># podatke spremite u okvire `mjesto2` i `mjesto3`</span></span>
<span id="cb133-3"><a href="okviri.html#cb133-3" tabindex="-1"></a></span>
<span id="cb133-4"><a href="okviri.html#cb133-4" tabindex="-1"></a><span class="co"># library(readr)</span></span>
<span id="cb133-5"><a href="okviri.html#cb133-5" tabindex="-1"></a>mjesto2 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;mjesto.csv&quot;</span>)</span>
<span id="cb133-6"><a href="okviri.html#cb133-6" tabindex="-1"></a>mjesto3 <span class="ot">&lt;-</span> <span class="fu">read_csv2</span>(<span class="st">&quot;mjestoAlt.csv&quot;</span>)</span>
<span id="cb133-7"><a href="okviri.html#cb133-7" tabindex="-1"></a></span>
<span id="cb133-8"><a href="okviri.html#cb133-8" tabindex="-1"></a><span class="co"># ispišite okvire `mjesto2` i `mjesto3`</span></span>
<span id="cb133-9"><a href="okviri.html#cb133-9" tabindex="-1"></a>mjesto2</span>
<span id="cb133-10"><a href="okviri.html#cb133-10" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;-----------</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb133-11"><a href="okviri.html#cb133-11" tabindex="-1"></a>mjesto3</span></code></pre></div>
<pre><code>## Rows: 5 Columns: 5
## ── Column specification ─────────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (1): nazivMjesta
## dbl (4): pbr, prosjPlacaKn, brojStanovnika, prirez
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
## ℹ Using &quot;&#39;,&#39;&quot; as decimal and &quot;&#39;.&#39;&quot; as grouping mark. Use `read_delim()` for more control.
## 
## Rows: 5 Columns: 5
## ── Column specification ─────────────────────────────────────────────────────────────
## Delimiter: &quot;;&quot;
## chr (1): nazivMjesta
## dbl (4): pbr, prosjPlacaKn, brojStanovnika, prirez
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre><code>## # A tibble: 5 × 5
##     pbr nazivMjesta prosjPlacaKn brojStanovnika prirez
##   &lt;dbl&gt; &lt;chr&gt;              &lt;dbl&gt;          &lt;dbl&gt;  &lt;dbl&gt;
## 1 10000 Zagreb              6359         790017     18
## 2 51000 Rijeka              5418         128384     15
## 3 21000 Split               5170         167121     10
## 4 31000 Osijek              4892          84104     13
## 5 20000 Dubrovnik           5348          28434     10
## -----------
## # A tibble: 5 × 5
##     pbr nazivMjesta prosjPlacaKn brojStanovnika prirez
##   &lt;dbl&gt; &lt;chr&gt;              &lt;dbl&gt;          &lt;dbl&gt;  &lt;dbl&gt;
## 1 10000 Zagreb              6359         790017     18
## 2 51000 Rijeka              5418         128384     15
## 3 21000 Split               5170         167121     10
## 4 31000 Osijek              4892          84104     13
## 5 20000 Dubrovnik           5348          28434     10</code></pre>
</div>
<hr />
<p>Uočimo da nam ove funkcije daju neke korisne informacije vezane uz pročitane datoteke. Ukoliko ove poruke ne želimo vidjeti, možemo funkciju omotati u poziv funkcije <code>suppressMessages</code> (u slučaju RMD datoteka možemo i u parametre kodnog odsječka staviti <code>message = FALSE</code>).</p>
<hr />
<p>Pogledajmo sada neke korisne funkcije za rad sa podatkovnim okvirima tj. tablicama. Dobar dio njih će nam već otprije biti poznat iz iskustva u radu sa listama i matricama:</p>
<ul>
<li><code>nrow</code> - broj redaka</li>
<li><code>ncol</code> ili <code>length</code> - broj stupaca (budući da se okvir ponaša i kao matrica i kao lista)</li>
<li><code>dim</code> - dimenzije tablice</li>
<li><code>names</code> - imena stupaca</li>
<li><code>head</code> - ispis nekoliko redaka s početka tablice</li>
<li><code>tail</code> - ispis nekoliko redaka s kraja tablice</li>
<li><code>str</code> - ispis strukture tablice</li>
<li><code>summary</code> - sažete statističke informacije o stupcima tablice</li>
</ul>
<p>Isprobajmo neke od ovih funkcija:</p>
<hr />
<p><strong>Zadatak 4.3 - funkcije za rad sa podatkovnim okvirima</strong></p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="okviri.html#cb136-1" tabindex="-1"></a><span class="co"># ispišite dimenzije tablice `mjesto`</span></span>
<span id="cb136-2"><a href="okviri.html#cb136-2" tabindex="-1"></a></span>
<span id="cb136-3"><a href="okviri.html#cb136-3" tabindex="-1"></a></span>
<span id="cb136-4"><a href="okviri.html#cb136-4" tabindex="-1"></a><span class="co"># ispišite strukturu tablice `mjesto`</span></span>
<span id="cb136-5"><a href="okviri.html#cb136-5" tabindex="-1"></a></span>
<span id="cb136-6"><a href="okviri.html#cb136-6" tabindex="-1"></a></span>
<span id="cb136-7"><a href="okviri.html#cb136-7" tabindex="-1"></a><span class="co"># ispišite prvih nekoliko redaka tablice `mjesto`</span></span>
<span id="cb136-8"><a href="okviri.html#cb136-8" tabindex="-1"></a></span>
<span id="cb136-9"><a href="okviri.html#cb136-9" tabindex="-1"></a></span>
<span id="cb136-10"><a href="okviri.html#cb136-10" tabindex="-1"></a><span class="co"># ispišite sažete statističke informacije o stupcima tablice `mjesto`</span></span></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="okviri.html#cb137-1" tabindex="-1"></a><span class="co"># ispišite dimenzije tablice `mjesto`</span></span>
<span id="cb137-2"><a href="okviri.html#cb137-2" tabindex="-1"></a><span class="fu">dim</span>(mjesto)</span>
<span id="cb137-3"><a href="okviri.html#cb137-3" tabindex="-1"></a></span>
<span id="cb137-4"><a href="okviri.html#cb137-4" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;-----------</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb137-5"><a href="okviri.html#cb137-5" tabindex="-1"></a></span>
<span id="cb137-6"><a href="okviri.html#cb137-6" tabindex="-1"></a><span class="co"># ispišite strukturu tablice `mjesto`</span></span>
<span id="cb137-7"><a href="okviri.html#cb137-7" tabindex="-1"></a><span class="fu">str</span>(mjesto)</span>
<span id="cb137-8"><a href="okviri.html#cb137-8" tabindex="-1"></a></span>
<span id="cb137-9"><a href="okviri.html#cb137-9" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;-----------</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb137-10"><a href="okviri.html#cb137-10" tabindex="-1"></a></span>
<span id="cb137-11"><a href="okviri.html#cb137-11" tabindex="-1"></a><span class="co"># ispišite prvih nekoliko redaka tablice `mjesto`</span></span>
<span id="cb137-12"><a href="okviri.html#cb137-12" tabindex="-1"></a><span class="fu">head</span>(mjesto)</span>
<span id="cb137-13"><a href="okviri.html#cb137-13" tabindex="-1"></a></span>
<span id="cb137-14"><a href="okviri.html#cb137-14" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;-----------</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb137-15"><a href="okviri.html#cb137-15" tabindex="-1"></a></span>
<span id="cb137-16"><a href="okviri.html#cb137-16" tabindex="-1"></a><span class="co"># ispišite sažete statističke informacije o stupcima tablice `mjesto`</span></span>
<span id="cb137-17"><a href="okviri.html#cb137-17" tabindex="-1"></a><span class="fu">summary</span>(mjesto)</span></code></pre></div>
<pre><code>## [1] 5 5
## -----------
## &#39;data.frame&#39;:    5 obs. of  5 variables:
##  $ pbr           : num  10000 51000 21000 31000 2000
##  $ nazivMjesta   : chr  &quot;Zagreb&quot; &quot;Rijeka&quot; &quot;Split&quot; &quot;Osijek&quot; ...
##  $ prosjPlacaKn  : num  6359 5418 5170 4892 5348
##  $ brojStanovnika: num  790017 128384 167121 84104 28434
##  $ prirez        : num  18 15 10 13 10
## -----------
##     pbr nazivMjesta prosjPlacaKn brojStanovnika prirez
## 1 10000      Zagreb         6359         790017     18
## 2 51000      Rijeka         5418         128384     15
## 3 21000       Split         5170         167121     10
## 4 31000      Osijek         4892          84104     13
## 5  2000   Dubrovnik         5348          28434     10
## -----------
##       pbr        nazivMjesta         prosjPlacaKn  brojStanovnika  
##  Min.   : 2000   Length:5           Min.   :4892   Min.   : 28434  
##  1st Qu.:10000   Class :character   1st Qu.:5170   1st Qu.: 84104  
##  Median :21000   Mode  :character   Median :5348   Median :128384  
##  Mean   :23000                      Mean   :5437   Mean   :239612  
##  3rd Qu.:31000                      3rd Qu.:5418   3rd Qu.:167121  
##  Max.   :51000                      Max.   :6359   Max.   :790017  
##      prirez    
##  Min.   :10.0  
##  1st Qu.:10.0  
##  Median :13.0  
##  Mean   :13.2  
##  3rd Qu.:15.0  
##  Max.   :18.0</code></pre>
</div>
<hr />
</div>
<div id="odabir-redaka-i-stupaca-podatkovnih-okvira" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Odabir redaka i stupaca podatkovnih okvira<a href="okviri.html#odabir-redaka-i-stupaca-podatkovnih-okvira" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Već smo rekli da se podatkovni okviri ponašaju i kao matrice i kao liste, što je svojstvo kojim se posebno često služimo kod odabira redaka i stupaca podatkovnih okvira. Konkretno, za “rezanje” okvira najčešće koristimo:</p>
<ul>
<li>dvodimenzionalno referenciranje uz pomoć indeksnih vektora</li>
<li>odabir pojedinog stupca uz pomoć operatora <code>$</code></li>
</ul>
<p>Ovdje smo zapravo dosta fleksibilni - možemo npr. prvo “izrezati” određene retke matrice uz pomoć lokacijskog referenciranja i potom izdvojiti samo jedan stupac uz pomoć operatora <code>$</code>. U praksi je jedna od najčešćih kombinacija uvjetni odabir redaka uz imenski odabir stupaca (poznavatelji <em>SQL</em>-a prepoznati će ovo kao standardnu kombinaciju <em>WHERE</em> uvjeta i <em>SELECT</em> liste).</p>
<p>Pokušajmo primijeniti naše znanje o indeksnim vektorima, matricama i listama na rezanje podatkovnih okvira.</p>
<hr />
<p><strong>Zadatak 4.4 - rezanje podatkovnih okvira</strong></p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="okviri.html#cb139-1" tabindex="-1"></a><span class="co"># ispišite tablicu `mjesto` (za referencu)</span></span>
<span id="cb139-2"><a href="okviri.html#cb139-2" tabindex="-1"></a></span>
<span id="cb139-3"><a href="okviri.html#cb139-3" tabindex="-1"></a><span class="co"># ispišite prva tri retka, treći i peti stupac</span></span>
<span id="cb139-4"><a href="okviri.html#cb139-4" tabindex="-1"></a></span>
<span id="cb139-5"><a href="okviri.html#cb139-5" tabindex="-1"></a><span class="co"># ispišite stupac &quot;prirez&quot;</span></span>
<span id="cb139-6"><a href="okviri.html#cb139-6" tabindex="-1"></a></span>
<span id="cb139-7"><a href="okviri.html#cb139-7" tabindex="-1"></a><span class="co"># ispišite poštanske brojeve i nazive svih mjesta koja </span></span>
<span id="cb139-8"><a href="okviri.html#cb139-8" tabindex="-1"></a><span class="co"># imaju prirez veći od 12% i broj stanovnika veći od 100,000</span></span></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="okviri.html#cb140-1" tabindex="-1"></a><span class="co">#ispišite tablicu `mjesto` (za referencu)</span></span>
<span id="cb140-2"><a href="okviri.html#cb140-2" tabindex="-1"></a>mjesto</span>
<span id="cb140-3"><a href="okviri.html#cb140-3" tabindex="-1"></a></span>
<span id="cb140-4"><a href="okviri.html#cb140-4" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;-----------</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb140-5"><a href="okviri.html#cb140-5" tabindex="-1"></a></span>
<span id="cb140-6"><a href="okviri.html#cb140-6" tabindex="-1"></a><span class="co">#ispišite prva tri retka, treći i peti stupac</span></span>
<span id="cb140-7"><a href="okviri.html#cb140-7" tabindex="-1"></a>mjesto[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">5</span>)]</span>
<span id="cb140-8"><a href="okviri.html#cb140-8" tabindex="-1"></a></span>
<span id="cb140-9"><a href="okviri.html#cb140-9" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;-----------</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb140-10"><a href="okviri.html#cb140-10" tabindex="-1"></a></span>
<span id="cb140-11"><a href="okviri.html#cb140-11" tabindex="-1"></a><span class="co">#ispišite stupac &quot;prirez&quot;</span></span>
<span id="cb140-12"><a href="okviri.html#cb140-12" tabindex="-1"></a>mjesto<span class="sc">$</span>prirez</span>
<span id="cb140-13"><a href="okviri.html#cb140-13" tabindex="-1"></a></span>
<span id="cb140-14"><a href="okviri.html#cb140-14" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;-----------</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb140-15"><a href="okviri.html#cb140-15" tabindex="-1"></a></span>
<span id="cb140-16"><a href="okviri.html#cb140-16" tabindex="-1"></a><span class="co">#ispišite poštanske brojeve i nazive svih mjesta koji imaju </span></span>
<span id="cb140-17"><a href="okviri.html#cb140-17" tabindex="-1"></a><span class="co"># prirez veći od 12% i broj stanovnika veći od 100,000</span></span>
<span id="cb140-18"><a href="okviri.html#cb140-18" tabindex="-1"></a>mjesto[mjesto<span class="sc">$</span>prirez <span class="sc">&gt;</span> <span class="dv">12</span> <span class="sc">&amp;</span> mjesto<span class="sc">$</span>brojStanovnika <span class="sc">&gt;</span> <span class="dv">100000</span>, <span class="fu">c</span>(<span class="st">&quot;pbr&quot;</span>, <span class="st">&quot;nazivMjesta&quot;</span>)]</span></code></pre></div>
<pre><code>##     pbr nazivMjesta prosjPlacaKn brojStanovnika prirez
## 1 10000      Zagreb         6359         790017     18
## 2 51000      Rijeka         5418         128384     15
## 3 21000       Split         5170         167121     10
## 4 31000      Osijek         4892          84104     13
## 5  2000   Dubrovnik         5348          28434     10
## -----------
##   prosjPlacaKn prirez
## 1         6359     18
## 2         5418     15
## 3         5170     10
## -----------
## [1] 18 15 10 13 10
## -----------
##     pbr nazivMjesta
## 1 10000      Zagreb
## 2 51000      Rijeka</code></pre>
</div>
<hr />
<p>Uočite sličnost između zadnjeg izraza i SQL upita: `</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="okviri.html#cb142-1" tabindex="-1"></a>SELECT pbr, nazivMjesta</span>
<span id="cb142-2"><a href="okviri.html#cb142-2" tabindex="-1"></a>FROM mjesto</span>
<span id="cb142-3"><a href="okviri.html#cb142-3" tabindex="-1"></a>WHERE mjesto.prirez <span class="sc">&gt;</span> <span class="dv">12</span> AND mjesto.brojStanovnika <span class="sc">&gt;</span> <span class="dv">100000</span></span></code></pre></div>
<p>Odabir stupaca i redaka nije težak ako dobro baratamo znanjem o indeksnim vektorima, no kao što se vidi u zadnjem primjeru sintaksa često nije previše čitljiva (u usporedbi sa npr. SQL-ovom sintaksom koja obavlja isti posao). Zbog toga postoje različita proširenja R-a koji ovaj posao uvelike olakšavaju, a koja ćemo detaljno obraditi u jednoj od budućih lekcija koja će se baviti upravljanjem podatkovnim skupovima.</p>
<hr />
</div>
<div id="dodavanje-i-brisanje-redaka-i-stupaca" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Dodavanje i brisanje redaka i stupaca<a href="okviri.html#dodavanje-i-brisanje-redaka-i-stupaca" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Za dodavanje i brisanje redaka i stupaca opet se dovoljno sjetiti da je podatkovni okvir svojevrsni hibrid matrice i liste tj. ako znamo dodavati retke i stupce u matricu ili nove elemente u listu onda ekvivalentnim načinom možemo podatke dodavati i u podatkovni okvir. U radu sa podatkovnim okvirima nešto češće dodajemo nove stupce (obično kao transformacije postojećih stupaca) nego retke tako da možemo primjere započeti sa dodavanjem stupaca.</p>
<p>Kao što je rečeno, stupce u podatkovni okvir dodajemo na isti način kao što dodajemo elemente liste - uz pažnju da dodani stupac ima isti broj elemenata kao i ostali stupci. Novi stupci često su izvedenice postojećih stupaca koje predstavljaju binarne indikatore, rezultate aritmetičkih izraza podataka u drugim stupcima i sl.</p>
<hr />
<p><strong>Zadatak 4.5 - dodavanje novih stupaca u tablicu</strong></p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="okviri.html#cb143-1" tabindex="-1"></a><span class="co"># tablici `mjesto` dodajte logički stupac `visokPrirez` </span></span>
<span id="cb143-2"><a href="okviri.html#cb143-2" tabindex="-1"></a><span class="co"># koji će pokazivati da li je prirez veći od 12%</span></span>
<span id="cb143-3"><a href="okviri.html#cb143-3" tabindex="-1"></a></span>
<span id="cb143-4"><a href="okviri.html#cb143-4" tabindex="-1"></a></span>
<span id="cb143-5"><a href="okviri.html#cb143-5" tabindex="-1"></a><span class="co"># pretpostavimo sljedeći (fiktivni!) način izračuna prireza</span></span>
<span id="cb143-6"><a href="okviri.html#cb143-6" tabindex="-1"></a><span class="co"># - mjesta imaju oko 60% radne populacije</span></span>
<span id="cb143-7"><a href="okviri.html#cb143-7" tabindex="-1"></a><span class="co"># - svaki radnik plaća porez koji je otprilike jednak 10% neto plaće </span></span>
<span id="cb143-8"><a href="okviri.html#cb143-8" tabindex="-1"></a><span class="co"># - prirez kojeg radnik plaća računamo kao (stopa prireza)*(iznos poreza)</span></span>
<span id="cb143-9"><a href="okviri.html#cb143-9" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb143-10"><a href="okviri.html#cb143-10" tabindex="-1"></a><span class="co"># dodajte stupac `mjesecniPrihod` koji će uz pomoć prosječne plaće, prireza </span></span>
<span id="cb143-11"><a href="okviri.html#cb143-11" tabindex="-1"></a><span class="co"># i broja stanovnika procijeniti koliki prihod pojedino mjesto dobija od prireza </span></span>
<span id="cb143-12"><a href="okviri.html#cb143-12" tabindex="-1"></a><span class="co"># (izraženo u milijunima Kn)</span></span>
<span id="cb143-13"><a href="okviri.html#cb143-13" tabindex="-1"></a><span class="co"># iznos zaokružite uz pomoć funkcije round ( primjer: round(100.12345, 2) ==&gt;  100.12  )</span></span>
<span id="cb143-14"><a href="okviri.html#cb143-14" tabindex="-1"></a></span>
<span id="cb143-15"><a href="okviri.html#cb143-15" tabindex="-1"></a></span>
<span id="cb143-16"><a href="okviri.html#cb143-16" tabindex="-1"></a><span class="co"># ispišite tablicu mjesto</span></span></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="okviri.html#cb144-1" tabindex="-1"></a><span class="co"># tablici `mjesto` dodajte logički stupac `visokPrirez` </span></span>
<span id="cb144-2"><a href="okviri.html#cb144-2" tabindex="-1"></a><span class="co"># koji će pokazivati da li je prirez veći od 12%</span></span>
<span id="cb144-3"><a href="okviri.html#cb144-3" tabindex="-1"></a>mjesto<span class="sc">$</span>visokPrirez <span class="ot">&lt;-</span> mjesto<span class="sc">$</span>prirez <span class="sc">&gt;</span> <span class="dv">12</span></span>
<span id="cb144-4"><a href="okviri.html#cb144-4" tabindex="-1"></a></span>
<span id="cb144-5"><a href="okviri.html#cb144-5" tabindex="-1"></a><span class="co"># pretpostavimo sljedeći (fiktivni!) način izračuna prireza</span></span>
<span id="cb144-6"><a href="okviri.html#cb144-6" tabindex="-1"></a><span class="co"># - mjesta imaju oko 60% radne populacije</span></span>
<span id="cb144-7"><a href="okviri.html#cb144-7" tabindex="-1"></a><span class="co"># - svaki radnik plaća porez koji je otprilike jednak 10% neto plaće </span></span>
<span id="cb144-8"><a href="okviri.html#cb144-8" tabindex="-1"></a><span class="co"># - prirez kojeg radnik plaća računati ćemo (stopa prireza)*(iznos poreza)</span></span>
<span id="cb144-9"><a href="okviri.html#cb144-9" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb144-10"><a href="okviri.html#cb144-10" tabindex="-1"></a><span class="co"># dodajte stupac `mjesecniPrihod` koji će uz pomoć prosječne plaće, prireza </span></span>
<span id="cb144-11"><a href="okviri.html#cb144-11" tabindex="-1"></a><span class="co"># i broja stanovnika procijeniti koliki prihod pojedino mjesto dobija od prireza </span></span>
<span id="cb144-12"><a href="okviri.html#cb144-12" tabindex="-1"></a><span class="co"># (izraženo u milijunima Kn)</span></span>
<span id="cb144-13"><a href="okviri.html#cb144-13" tabindex="-1"></a><span class="co"># iznos zaokružite uz pomoć funkcije round ( primjer: round(100.12345, 2) ==&gt;  100.12  )</span></span>
<span id="cb144-14"><a href="okviri.html#cb144-14" tabindex="-1"></a>mjesto<span class="sc">$</span>mjesecniPrihod <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fl">0.6</span> <span class="sc">*</span> mjesto<span class="sc">$</span>brojStanovnika <span class="sc">*</span> <span class="fl">0.1</span> <span class="sc">*</span> </span>
<span id="cb144-15"><a href="okviri.html#cb144-15" tabindex="-1"></a>                          mjesto<span class="sc">$</span>prosjPlacaKn  <span class="sc">*</span> <span class="fl">0.01</span> <span class="sc">*</span> mjesto<span class="sc">$</span>prirez <span class="sc">/</span> <span class="fl">1e6</span> , <span class="dv">2</span>)</span>
<span id="cb144-16"><a href="okviri.html#cb144-16" tabindex="-1"></a></span>
<span id="cb144-17"><a href="okviri.html#cb144-17" tabindex="-1"></a></span>
<span id="cb144-18"><a href="okviri.html#cb144-18" tabindex="-1"></a><span class="co"># ispišite tablicu mjesto</span></span>
<span id="cb144-19"><a href="okviri.html#cb144-19" tabindex="-1"></a>mjesto</span></code></pre></div>
<pre><code>##     pbr nazivMjesta prosjPlacaKn brojStanovnika prirez visokPrirez
## 1 10000      Zagreb         6359         790017     18        TRUE
## 2 51000      Rijeka         5418         128384     15        TRUE
## 3 21000       Split         5170         167121     10       FALSE
## 4 31000      Osijek         4892          84104     13        TRUE
## 5  2000   Dubrovnik         5348          28434     10       FALSE
##   mjesecniPrihod
## 1          54.26
## 2           6.26
## 3           5.18
## 4           3.21
## 5           0.91</code></pre>
</div>
<hr />
<p>Retke i stupce smo također mogli dodati slično dodavanju redaka i stupaca u matricu - uz pomoć funkcija <code>rbind</code> i <code>cbind</code>. Kod funkcije <code>rbind</code> obično dodajemo novi podatkovni okvir sa retcima koji imaju odgovarajući redoslijed i vrstu elemenata, dok kod funkcije <code>cbind</code> možemo dodati i obični vektor no moramo paziti da broj elemenata odgovara broju redaka originalnog okvira.</p>
<p>Isprobajmo ove funkcije na malim “umjetnim” podatkovnim okvirima kako bi lakše predočili njihovu funkcionalnost.</p>
<hr />
<p><strong>Zadatak 4.6 - funkcije <code>rbind</code>/<code>cbind</code> i podatkovni okviri</strong></p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="okviri.html#cb146-1" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">a =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="at">b =</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>), <span class="at">c =</span> <span class="fu">c</span>(T, F, T))</span>
<span id="cb146-2"><a href="okviri.html#cb146-2" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">a =</span> <span class="dv">1</span>, <span class="at">b =</span> <span class="st">&quot;A&quot;</span>, <span class="at">c =</span> <span class="dv">3</span>)</span>
<span id="cb146-3"><a href="okviri.html#cb146-3" tabindex="-1"></a></span>
<span id="cb146-4"><a href="okviri.html#cb146-4" tabindex="-1"></a><span class="co">#spojite df1 i df2 u podatkovni okvir df12 uz pomoć funkcije `rbind`</span></span>
<span id="cb146-5"><a href="okviri.html#cb146-5" tabindex="-1"></a></span>
<span id="cb146-6"><a href="okviri.html#cb146-6" tabindex="-1"></a></span>
<span id="cb146-7"><a href="okviri.html#cb146-7" tabindex="-1"></a><span class="co"># okviru df12 dodajte stupac `imena` sa imenima Ivo, Ana, Pero i Stipe</span></span>
<span id="cb146-8"><a href="okviri.html#cb146-8" tabindex="-1"></a><span class="co"># koristite funkciju `cbind`</span></span>
<span id="cb146-9"><a href="okviri.html#cb146-9" tabindex="-1"></a></span>
<span id="cb146-10"><a href="okviri.html#cb146-10" tabindex="-1"></a><span class="co"># ispišite okvir df12</span></span></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="okviri.html#cb147-1" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">a =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="at">b =</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>), <span class="at">c =</span> <span class="fu">c</span>(T, F, T))</span>
<span id="cb147-2"><a href="okviri.html#cb147-2" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">a =</span> <span class="dv">1</span>, <span class="at">b =</span> <span class="st">&quot;A&quot;</span>, <span class="at">c =</span> <span class="dv">3</span>)</span>
<span id="cb147-3"><a href="okviri.html#cb147-3" tabindex="-1"></a></span>
<span id="cb147-4"><a href="okviri.html#cb147-4" tabindex="-1"></a><span class="co">#spojite df1 i df2 u podatkovni okvir df12 uz pomoć funkcije `rbind`</span></span>
<span id="cb147-5"><a href="okviri.html#cb147-5" tabindex="-1"></a>df12 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(df1, df2)</span>
<span id="cb147-6"><a href="okviri.html#cb147-6" tabindex="-1"></a></span>
<span id="cb147-7"><a href="okviri.html#cb147-7" tabindex="-1"></a><span class="co"># okviru df12 dodajte stupac `imena` sa imenima Ivo, Ana, Pero i Stipe</span></span>
<span id="cb147-8"><a href="okviri.html#cb147-8" tabindex="-1"></a><span class="co"># koristite funkciju `cbind`</span></span>
<span id="cb147-9"><a href="okviri.html#cb147-9" tabindex="-1"></a>df12 <span class="ot">&lt;-</span> <span class="fu">cbind</span>(df12, <span class="at">imena =</span> <span class="fu">c</span>(<span class="st">&quot;Ivo&quot;</span>, <span class="st">&quot;Ana&quot;</span>, <span class="st">&quot;Pero&quot;</span>, <span class="st">&quot;Stipe&quot;</span>))</span>
<span id="cb147-10"><a href="okviri.html#cb147-10" tabindex="-1"></a></span>
<span id="cb147-11"><a href="okviri.html#cb147-11" tabindex="-1"></a><span class="co"># ispišite okvir df12</span></span>
<span id="cb147-12"><a href="okviri.html#cb147-12" tabindex="-1"></a>df12</span></code></pre></div>
<pre><code>##   a b c imena
## 1 1 A 1   Ivo
## 2 2 B 0   Ana
## 3 3 C 1  Pero
## 4 1 A 3 Stipe</code></pre>
</div>
<hr />
<p>Za <em>brisanje redaka i stupaca</em> također se možemo koristiti istim metodama za upravljanje matricama i listama. Konkretno:</p>
<ul>
<li>brisanje redaka i stupaca možemo obaviti dvodimenzionalnim referenciranjem redaka i stupaca koje želimo “zadržati”</li>
<li>brisanje stupaca možemo obaviti pridjeljivanjem vrijednosti <code>NULL</code> odabranom stupcu</li>
</ul>
<p>Isprobajmo ovo na primjeru.</p>
<hr />
<p><strong>Zadatak 4.7 - brisanje redaka i stupaca</strong></p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="okviri.html#cb149-1" tabindex="-1"></a><span class="co"># obrišite prvi redak i drugi stupac iz df12 metodom 2d referenciranja</span></span>
<span id="cb149-2"><a href="okviri.html#cb149-2" tabindex="-1"></a></span>
<span id="cb149-3"><a href="okviri.html#cb149-3" tabindex="-1"></a></span>
<span id="cb149-4"><a href="okviri.html#cb149-4" tabindex="-1"></a><span class="co"># obrišite stupac `imena` uz pomoć pridjeljivanja `NULL` vrijednosti</span></span>
<span id="cb149-5"><a href="okviri.html#cb149-5" tabindex="-1"></a></span>
<span id="cb149-6"><a href="okviri.html#cb149-6" tabindex="-1"></a></span>
<span id="cb149-7"><a href="okviri.html#cb149-7" tabindex="-1"></a><span class="co"># ispišite df12</span></span></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="okviri.html#cb150-1" tabindex="-1"></a><span class="co"># obrišite prvi redak i drugi stupac iz df12 metodom 2d referenciranja</span></span>
<span id="cb150-2"><a href="okviri.html#cb150-2" tabindex="-1"></a>df12 <span class="ot">&lt;-</span> df12[<span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>]    </span>
<span id="cb150-3"><a href="okviri.html#cb150-3" tabindex="-1"></a></span>
<span id="cb150-4"><a href="okviri.html#cb150-4" tabindex="-1"></a><span class="co"># obrišite stupac `imena` uz pomoć pridjeljivanja `NULL` vrijednosti</span></span>
<span id="cb150-5"><a href="okviri.html#cb150-5" tabindex="-1"></a>df12<span class="sc">$</span>imena <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb150-6"><a href="okviri.html#cb150-6" tabindex="-1"></a></span>
<span id="cb150-7"><a href="okviri.html#cb150-7" tabindex="-1"></a><span class="co"># ispišite df12</span></span>
<span id="cb150-8"><a href="okviri.html#cb150-8" tabindex="-1"></a>df12</span></code></pre></div>
<pre><code>##   a c
## 2 2 0
## 3 3 1
## 4 1 3</code></pre>
</div>
<hr />
<p>Podatkovnim okvirima ćemo se nastaviti baviti u poglavlju o upravljanju podatkovnim skupovima, gdje ćemo naučiti kako raditi sa okvirima sa daleko više podataka od primjera koje smo koristili u ovoj lekciji, te kako raditi sa dodatnim paketima koji značajno olakšavaju česte radnje nad podacima u podatkovnim okvirima. U nastavku ćemo se pozabaviti još jednim novim (i ponešto kontroverznim) tipom podatkovne strukture.</p>
<hr />
</div>
<div id="faktori" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> Faktori<a href="okviri.html#faktori" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Faktor</strong> u R-u je zapravo tip podataka koji predstavlja ono onoga što se u statistici naziva <strong>nominalnom</strong> ili <strong>kategorijskom</strong> varijablom. Naime, atribut neke obzervacije često poprima neku vrijednost iz skupa otprije poznatih kategorija (npr. varijabla spola, dobne kategorije, obrazovanja, mjesta rođenja, stranačke preferencije i sl.). Kategorije se često identificiraju jedinstvenim nizom znakova, a u procesu analize uz pomoć njih često provodimo razna agregiranja i grupacije (npr. u nekoj utrci možemo gledati prosječno vrijeme ovisno o spolu ili dobnoj kategoriji) ili pak dijelimo skup podataka ovisno o kategorijskoj pripadnosti.</p>
<p>Faktori u R-u su često i predmet rasprava budući da se radi o konstruktu koji može olakšati rad nad podacima, ali i uzrokovati brojne probleme, pogotovo ako nismo svjesni da u nekom trenutku radimo sa faktorom (ovaj scenarij se zapravo vrlo lako izbjegava, što ćemo objasniti na kraju ovog poglavlja).</p>
<hr />
<p>Za početak ćemo predočiti što su zapravo faktori uz pomoć jednostavnog primjera. Zamislimo da sljedeći znakovni vektor opisuje razinu krvnog tlaka kod deset pacijenata:</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="okviri.html#cb152-1" tabindex="-1"></a>tlak <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;nizak&quot;</span>, <span class="st">&quot;visok&quot;</span>, <span class="st">&quot;visok&quot;</span>, <span class="st">&quot;normalan&quot;</span>, <span class="st">&quot;normalan&quot;</span>, </span>
<span id="cb152-2"><a href="okviri.html#cb152-2" tabindex="-1"></a>          <span class="st">&quot;nizak&quot;</span>, <span class="st">&quot;visok&quot;</span>, <span class="st">&quot;nizak&quot;</span>, <span class="st">&quot;normalan&quot;</span>, <span class="st">&quot;normalan&quot;</span>)</span></code></pre></div>
<p>Ovo je očito “kategorijska” varijabla budući da može poprimiti jednu od tri diskretne vrijednosti - <code>"nizak"</code>, <code>"normalan"</code> i <code>"visok"</code>. Prema tome, ovaj vektor je tipičan kandidat za “faktoriziranje”, tj. za pretvorbu u objekt klase <code>factor</code>. Faktorizaciju znakovnog vektora provodimo uz pomoć funkcije <code>factor</code> kojoj prosljeđujemo (u pravilu) znakovni vektor kao parametar.</p>
<hr />
<p><strong>Zadatak 4.8 - faktoriziranje znakovnog vektora</strong></p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="okviri.html#cb153-1" tabindex="-1"></a>tlak <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;nizak&quot;</span>, <span class="st">&quot;visok&quot;</span>, <span class="st">&quot;visok&quot;</span>, <span class="st">&quot;normalan&quot;</span>, <span class="st">&quot;normalan&quot;</span>, </span>
<span id="cb153-2"><a href="okviri.html#cb153-2" tabindex="-1"></a>          <span class="st">&quot;nizak&quot;</span>, <span class="st">&quot;visok&quot;</span>, <span class="st">&quot;nizak&quot;</span>, <span class="st">&quot;normalan&quot;</span>, <span class="st">&quot;normalan&quot;</span>)</span>
<span id="cb153-3"><a href="okviri.html#cb153-3" tabindex="-1"></a></span>
<span id="cb153-4"><a href="okviri.html#cb153-4" tabindex="-1"></a><span class="co"># ispišite varijablu `tlak`</span></span>
<span id="cb153-5"><a href="okviri.html#cb153-5" tabindex="-1"></a></span>
<span id="cb153-6"><a href="okviri.html#cb153-6" tabindex="-1"></a><span class="co"># ispišite klasu varijable `tlak`</span></span>
<span id="cb153-7"><a href="okviri.html#cb153-7" tabindex="-1"></a></span>
<span id="cb153-8"><a href="okviri.html#cb153-8" tabindex="-1"></a><span class="co"># stvorite varijablu `tlak.f` koja će biti faktorizirana</span></span>
<span id="cb153-9"><a href="okviri.html#cb153-9" tabindex="-1"></a><span class="co"># inačica varijable `tlak`</span></span>
<span id="cb153-10"><a href="okviri.html#cb153-10" tabindex="-1"></a></span>
<span id="cb153-11"><a href="okviri.html#cb153-11" tabindex="-1"></a><span class="co"># ispišite varijablu `tlak.f`</span></span>
<span id="cb153-12"><a href="okviri.html#cb153-12" tabindex="-1"></a></span>
<span id="cb153-13"><a href="okviri.html#cb153-13" tabindex="-1"></a><span class="co"># ispišite klasu varijable tlak.f</span></span></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="okviri.html#cb154-1" tabindex="-1"></a>tlak <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;nizak&quot;</span>, <span class="st">&quot;visok&quot;</span>, <span class="st">&quot;visok&quot;</span>, <span class="st">&quot;normalan&quot;</span>, <span class="st">&quot;normalan&quot;</span>, </span>
<span id="cb154-2"><a href="okviri.html#cb154-2" tabindex="-1"></a>          <span class="st">&quot;nizak&quot;</span>, <span class="st">&quot;visok&quot;</span>, <span class="st">&quot;nizak&quot;</span>, <span class="st">&quot;normalan&quot;</span>, <span class="st">&quot;normalan&quot;</span>)</span>
<span id="cb154-3"><a href="okviri.html#cb154-3" tabindex="-1"></a></span>
<span id="cb154-4"><a href="okviri.html#cb154-4" tabindex="-1"></a><span class="co"># ispišite varijablu `tlak`</span></span>
<span id="cb154-5"><a href="okviri.html#cb154-5" tabindex="-1"></a>tlak</span>
<span id="cb154-6"><a href="okviri.html#cb154-6" tabindex="-1"></a></span>
<span id="cb154-7"><a href="okviri.html#cb154-7" tabindex="-1"></a><span class="co"># ispišite klasu varijable `tlak`</span></span>
<span id="cb154-8"><a href="okviri.html#cb154-8" tabindex="-1"></a><span class="fu">class</span>(tlak)</span>
<span id="cb154-9"><a href="okviri.html#cb154-9" tabindex="-1"></a></span>
<span id="cb154-10"><a href="okviri.html#cb154-10" tabindex="-1"></a><span class="co"># stvorite varijablu `tlak.f` koja će biti faktorizirana</span></span>
<span id="cb154-11"><a href="okviri.html#cb154-11" tabindex="-1"></a><span class="co"># inačica varijable `tlak`</span></span>
<span id="cb154-12"><a href="okviri.html#cb154-12" tabindex="-1"></a>tlak.f <span class="ot">&lt;-</span> <span class="fu">factor</span>(tlak)</span>
<span id="cb154-13"><a href="okviri.html#cb154-13" tabindex="-1"></a></span>
<span id="cb154-14"><a href="okviri.html#cb154-14" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;-----------</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb154-15"><a href="okviri.html#cb154-15" tabindex="-1"></a></span>
<span id="cb154-16"><a href="okviri.html#cb154-16" tabindex="-1"></a><span class="co"># ispišite varijablu `tlak.f`</span></span>
<span id="cb154-17"><a href="okviri.html#cb154-17" tabindex="-1"></a>tlak.f</span>
<span id="cb154-18"><a href="okviri.html#cb154-18" tabindex="-1"></a></span>
<span id="cb154-19"><a href="okviri.html#cb154-19" tabindex="-1"></a><span class="co"># ispišite klasu varijable tlak.f</span></span>
<span id="cb154-20"><a href="okviri.html#cb154-20" tabindex="-1"></a><span class="fu">class</span>(tlak.f)</span></code></pre></div>
<pre><code>##  [1] &quot;nizak&quot;    &quot;visok&quot;    &quot;visok&quot;    &quot;normalan&quot; &quot;normalan&quot; &quot;nizak&quot;   
##  [7] &quot;visok&quot;    &quot;nizak&quot;    &quot;normalan&quot; &quot;normalan&quot;
## [1] &quot;character&quot;
## -----------
##  [1] nizak    visok    visok    normalan normalan nizak    visok    nizak   
##  [9] normalan normalan
## Levels: nizak normalan visok
## [1] &quot;factor&quot;</code></pre>
</div>
<hr />
<p>Vidimo da je ispis faktora dobio dodatni atribut <code>Levels</code>. To znači da se sada ovdje radi o “pravoj” kategorijskoj varijabli sa točno definiranim kategorijama koje smije poprimiti. Ako pokušamo dodati novu vrijednost u faktor koja nije zastupljena u trenutnim kategorijama (npr. “prenizak”) dobiti ćemo upozorenje, a umjesto kategorije koju smo naveli nova stavka imati će vrijednost <code>NA</code>.</p>
<p>Ovo ponekad nije scenarij kojeg priželjkujemo. Ukoliko unaprijed znamo da znakovni vektor kojeg kategoriziramo ne sadrži sve moguće kategorije koje se općenito mogu pojaviti, imamo opciju dodavanja parametra <code>levels</code> u kojem ćemo uz pomoć znakovnog vektora eksplicitno navesti niz “mogućih” kategorija.</p>
<hr />
<p><strong>Zadatak 4.9 - nezastupljene kategorije i parametar <code>levels</code></strong></p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="okviri.html#cb156-1" tabindex="-1"></a><span class="co"># dodajte 11. element u vektor `tlak.f` sa sadržajem &quot;prenizak&quot;</span></span>
<span id="cb156-2"><a href="okviri.html#cb156-2" tabindex="-1"></a></span>
<span id="cb156-3"><a href="okviri.html#cb156-3" tabindex="-1"></a><span class="co"># ispišite `tlak.f`</span></span>
<span id="cb156-4"><a href="okviri.html#cb156-4" tabindex="-1"></a></span>
<span id="cb156-5"><a href="okviri.html#cb156-5" tabindex="-1"></a><span class="co"># napravite varijablu `tlak.f2` uz pomoć varijable `tlak`</span></span>
<span id="cb156-6"><a href="okviri.html#cb156-6" tabindex="-1"></a><span class="co"># kategorijske razine navedite eksplicitno tako da sadrže</span></span>
<span id="cb156-7"><a href="okviri.html#cb156-7" tabindex="-1"></a><span class="co"># i kategorije &quot;prenizak&quot; i &quot;previsok&quot;</span></span>
<span id="cb156-8"><a href="okviri.html#cb156-8" tabindex="-1"></a></span>
<span id="cb156-9"><a href="okviri.html#cb156-9" tabindex="-1"></a><span class="co"># dodajte 11. element u vektor `tlak.f2` sa sadržajem &quot;prenizak&quot;</span></span>
<span id="cb156-10"><a href="okviri.html#cb156-10" tabindex="-1"></a></span>
<span id="cb156-11"><a href="okviri.html#cb156-11" tabindex="-1"></a><span class="co"># ispišite `tlak.f2`</span></span></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="okviri.html#cb157-1" tabindex="-1"></a><span class="co"># dodajte 11. element u vektor `tlak.f` sa sadržajem &quot;prenizak&quot;</span></span>
<span id="cb157-2"><a href="okviri.html#cb157-2" tabindex="-1"></a>tlak.f[<span class="dv">11</span>] <span class="ot">&lt;-</span> <span class="st">&quot;prenizak&quot;</span></span></code></pre></div>
<pre><code>## Warning in `[&lt;-.factor`(`*tmp*`, 11, value = &quot;prenizak&quot;): invalid factor level,
## NA generated</code></pre>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="okviri.html#cb159-1" tabindex="-1"></a><span class="co"># ispišite `tlak.f`</span></span>
<span id="cb159-2"><a href="okviri.html#cb159-2" tabindex="-1"></a>tlak.f</span>
<span id="cb159-3"><a href="okviri.html#cb159-3" tabindex="-1"></a></span>
<span id="cb159-4"><a href="okviri.html#cb159-4" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;-----------</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb159-5"><a href="okviri.html#cb159-5" tabindex="-1"></a></span>
<span id="cb159-6"><a href="okviri.html#cb159-6" tabindex="-1"></a><span class="co"># napravite varijablu `tlak.f2` uz pomoć varijable `tlak`</span></span>
<span id="cb159-7"><a href="okviri.html#cb159-7" tabindex="-1"></a><span class="co"># kategorijske razine navedite eksplicitno tako da sadrže</span></span>
<span id="cb159-8"><a href="okviri.html#cb159-8" tabindex="-1"></a><span class="co"># i kategorije &quot;prenizak&quot; i &quot;previsok&quot;</span></span>
<span id="cb159-9"><a href="okviri.html#cb159-9" tabindex="-1"></a>tlak.f2 <span class="ot">&lt;-</span> <span class="fu">factor</span>(tlak, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;prenizak&quot;</span>, <span class="st">&quot;nizak&quot;</span>, <span class="st">&quot;normalan&quot;</span>,</span>
<span id="cb159-10"><a href="okviri.html#cb159-10" tabindex="-1"></a>                    <span class="st">&quot;visok&quot;</span>, <span class="st">&quot;previsok&quot;</span>))</span>
<span id="cb159-11"><a href="okviri.html#cb159-11" tabindex="-1"></a></span>
<span id="cb159-12"><a href="okviri.html#cb159-12" tabindex="-1"></a><span class="co"># dodajte 11. element u vektor `tlak.f2` sa sadržajem &quot;prenizak&quot;</span></span>
<span id="cb159-13"><a href="okviri.html#cb159-13" tabindex="-1"></a>tlak.f2[<span class="dv">11</span>] <span class="ot">&lt;-</span> <span class="st">&quot;prenizak&quot;</span></span>
<span id="cb159-14"><a href="okviri.html#cb159-14" tabindex="-1"></a></span>
<span id="cb159-15"><a href="okviri.html#cb159-15" tabindex="-1"></a><span class="co"># ispišite `tlak.f2`</span></span>
<span id="cb159-16"><a href="okviri.html#cb159-16" tabindex="-1"></a>tlak.f2</span></code></pre></div>
<pre><code>##  [1] nizak    visok    visok    normalan normalan nizak    visok    nizak   
##  [9] normalan normalan &lt;NA&gt;    
## Levels: nizak normalan visok
## -----------
##  [1] nizak    visok    visok    normalan normalan nizak    visok    nizak   
##  [9] normalan normalan prenizak
## Levels: prenizak nizak normalan visok previsok</code></pre>
</div>
<hr />
<p>Koja je prednost faktora? Zašto varijable ne bismo ostavili u originalnom, “znakovnom” obliku? Razlog potrebe za faktoriziranjem kategorijskih stupaca tj. varijabli je poglavito u tome što određene statističke i vizualizacijske funkcije “znaju” na ispravan način interpretirati i koristiti faktore te ih tretiraju drugačije od običnih “znakovnih” stupaca. Zbog toga je vrlo dobra dugoročna strategija već u početku učenja R-a naviknuti se da kod rada sa podatkovnim okvirima faktoriziramo stupce koji su zaista kategorijske varijable (ali također i pripazimo da nemamo faktorizirane stupce koji nisu kategorijske varijable, što se može događati ako nismo pažljivi).</p>
<p>Jedno od pitanja koje se često pitamo vezano uz kategorijske varijable jest - kolika je zastupljenost pojedinih kategorija? Odgovor na ovo pitanje daje nam funkcija <code>table</code> kojoj prosljeđujemo odabrani faktor.</p>
<hr />
<p><strong>Zadatak 4.10 - funkcija <code>table</code></strong></p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="okviri.html#cb161-1" tabindex="-1"></a><span class="co"># ispišite zastupljenost pojedinih kategorija u faktoru `tlak.f2`</span></span></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="okviri.html#cb162-1" tabindex="-1"></a><span class="co"># ispišite zastupljenost pojedinih kategorija u faktoru `tlak.f2`</span></span>
<span id="cb162-2"><a href="okviri.html#cb162-2" tabindex="-1"></a><span class="fu">table</span>(tlak.f2)</span></code></pre></div>
<pre><code>## tlak.f2
## prenizak    nizak normalan    visok previsok 
##        1        3        4        3        0</code></pre>
</div>
<p>Funkcija <code>table</code> ne zahtijeva nužno faktor i uredno će raditi čak i sa znakovnim vektorom. No u tom slučaju ne bismo dobili informaciju o kategorijama koje nisu uopće zastupljene.</p>
<hr />
<p>Kategorijska varijabla iz naših primjera zapravo ima prirodu tzv. ordinalne kategorijske varijable, što znači da kategorije imaju prirodni poredak (nizak tlak je “manji” od normalnog koji je “manji” od visokog). Ukoliko želimo, ovu činjenicu možemo “ugraditi” u faktor kod njegove inicijalizacije, jednostavnim dodavanjem parametra <code>ordered</code> postavljenog na <code>TRUE</code>. Prednost ordinalnog faktora jest ta što nam omogućuje usporedbu vrijednosti faktora uz pomoć usporednih operatora.</p>
<hr />
<p><strong>Zadatak 4.11 - ordinalni faktor</strong></p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="okviri.html#cb164-1" tabindex="-1"></a><span class="co"># napravite varijablu `tlak.f3` na isti način kao i `tlak.f2`</span></span>
<span id="cb164-2"><a href="okviri.html#cb164-2" tabindex="-1"></a><span class="co"># ali uz dodatni parametar `ordered = TRUE`</span></span>
<span id="cb164-3"><a href="okviri.html#cb164-3" tabindex="-1"></a><span class="co"># pripazite da poredak kategorija odgovara ordinalnom rasporedu</span></span>
<span id="cb164-4"><a href="okviri.html#cb164-4" tabindex="-1"></a></span>
<span id="cb164-5"><a href="okviri.html#cb164-5" tabindex="-1"></a></span>
<span id="cb164-6"><a href="okviri.html#cb164-6" tabindex="-1"></a><span class="co"># ispišite `tlak.f3`</span></span>
<span id="cb164-7"><a href="okviri.html#cb164-7" tabindex="-1"></a></span>
<span id="cb164-8"><a href="okviri.html#cb164-8" tabindex="-1"></a></span>
<span id="cb164-9"><a href="okviri.html#cb164-9" tabindex="-1"></a><span class="co"># provjerite radi li se uistinu o ordinalnom faktoru </span></span>
<span id="cb164-10"><a href="okviri.html#cb164-10" tabindex="-1"></a><span class="co"># uz pomoć funkcije `is.ordered`</span></span>
<span id="cb164-11"><a href="okviri.html#cb164-11" tabindex="-1"></a></span>
<span id="cb164-12"><a href="okviri.html#cb164-12" tabindex="-1"></a></span>
<span id="cb164-13"><a href="okviri.html#cb164-13" tabindex="-1"></a><span class="co"># provjerite da li je tlak prvog pacijenta</span></span>
<span id="cb164-14"><a href="okviri.html#cb164-14" tabindex="-1"></a><span class="co"># (okvirno) niži od tlaka trećeg pacijenta</span></span></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="okviri.html#cb165-1" tabindex="-1"></a><span class="co"># napravite varijablu `tlak.f3` na isti način kao i `tlak.f2`</span></span>
<span id="cb165-2"><a href="okviri.html#cb165-2" tabindex="-1"></a><span class="co"># ali uz dodatni parametar `ordered = TRUE`</span></span>
<span id="cb165-3"><a href="okviri.html#cb165-3" tabindex="-1"></a><span class="co"># pripazite da poredak kategorija odgovara ordinalnom rasporedu</span></span>
<span id="cb165-4"><a href="okviri.html#cb165-4" tabindex="-1"></a>tlak.f3 <span class="ot">&lt;-</span> <span class="fu">factor</span>(tlak, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;prenizak&quot;</span>, <span class="st">&quot;nizak&quot;</span>, <span class="st">&quot;normalan&quot;</span>, <span class="st">&quot;visok&quot;</span>, <span class="st">&quot;previsok&quot;</span>), <span class="at">ordered =</span> <span class="cn">TRUE</span>)</span>
<span id="cb165-5"><a href="okviri.html#cb165-5" tabindex="-1"></a></span>
<span id="cb165-6"><a href="okviri.html#cb165-6" tabindex="-1"></a><span class="co"># ispišite `tlak.f3`</span></span>
<span id="cb165-7"><a href="okviri.html#cb165-7" tabindex="-1"></a>tlak.f3</span>
<span id="cb165-8"><a href="okviri.html#cb165-8" tabindex="-1"></a></span>
<span id="cb165-9"><a href="okviri.html#cb165-9" tabindex="-1"></a><span class="co"># provjerite radi li se uistinu o ordinalnom faktoru </span></span>
<span id="cb165-10"><a href="okviri.html#cb165-10" tabindex="-1"></a><span class="co"># uz pomoć funkcije `is.ordered`</span></span>
<span id="cb165-11"><a href="okviri.html#cb165-11" tabindex="-1"></a><span class="fu">is.ordered</span>(tlak.f3)</span>
<span id="cb165-12"><a href="okviri.html#cb165-12" tabindex="-1"></a></span>
<span id="cb165-13"><a href="okviri.html#cb165-13" tabindex="-1"></a></span>
<span id="cb165-14"><a href="okviri.html#cb165-14" tabindex="-1"></a><span class="co"># provjerite da li je tlak prvog pacijenta</span></span>
<span id="cb165-15"><a href="okviri.html#cb165-15" tabindex="-1"></a><span class="co"># (okvirno) niži od tlaka trećeg pacijenta</span></span>
<span id="cb165-16"><a href="okviri.html#cb165-16" tabindex="-1"></a>tlak.f3[<span class="dv">1</span>] <span class="sc">&lt;</span> tlak.f3[<span class="dv">3</span>]</span></code></pre></div>
<pre><code>##  [1] nizak    visok    visok    normalan normalan nizak    visok    nizak   
##  [9] normalan normalan
## Levels: prenizak &lt; nizak &lt; normalan &lt; visok &lt; previsok
## [1] TRUE
## [1] TRUE</code></pre>
</div>
<hr />
<p>Već smo uvidjeli da je u R-u zapravo “sve vektor” - brojevi su jednodimenzionalni numerički vektori, matrice su vektori sa dodanim parametrom dimenzionalnosti, liste su vektori malih listi, podatkovni okviri su liste za dodanom restrikcijom. Možemo se zapitati - što su zapravo faktori?</p>
<p>Implementacijski, faktor je zapravo kodirani ili enumerirani skup vrijednosti inicijalno definiranih znakovnih nizova, uz pridruženu kodnu tablicu istih. Jednostavnije rečeno, faktorizacija znakovnog vektora uključuje:</p>
<ul>
<li>“popisivanje” svih uočenih kategorija (ili preuzimanje eksplicitnog popisa iz parametra <code>levels</code>)</li>
<li>pridjeljivanje numeričkih vrijednosti redom svakoj kategoriji (npr: <code>"nizak"</code> -&gt; <code>1</code>, <code>"normalan"</code> -&gt; <code>2</code> itd.)</li>
<li>“pakiranje” novostvorenog numeričkog vektora i pripadajuće “kodne tablice”</li>
</ul>
<p>Iako ove korake R radi automatski, u internu strukturu faktora možemo se uvjeriti ako faktor probamo pretvoriti u čisti numerički, odnosno čisti znakovni tip.</p>
<hr />
<p><strong>Zadatak 4.12 - interna struktura faktora</strong></p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="okviri.html#cb167-1" tabindex="-1"></a><span class="co"># ispišite vrijednost varijable tlak.f3 pretvorene u znakovni tip</span></span>
<span id="cb167-2"><a href="okviri.html#cb167-2" tabindex="-1"></a></span>
<span id="cb167-3"><a href="okviri.html#cb167-3" tabindex="-1"></a><span class="co"># ispišite vrijednost varijable tlak.f3 pretvorene u numerički tip</span></span></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="okviri.html#cb168-1" tabindex="-1"></a><span class="co"># ispišite vrijednost varijable tlak.f3 pretvorene u znakovni tip</span></span>
<span id="cb168-2"><a href="okviri.html#cb168-2" tabindex="-1"></a><span class="fu">as.character</span>(tlak.f3)</span>
<span id="cb168-3"><a href="okviri.html#cb168-3" tabindex="-1"></a></span>
<span id="cb168-4"><a href="okviri.html#cb168-4" tabindex="-1"></a><span class="co"># ispišite vrijednost varijable tlak.f3 pretvorene u numerički tip</span></span>
<span id="cb168-5"><a href="okviri.html#cb168-5" tabindex="-1"></a><span class="fu">as.numeric</span>(tlak.f3)</span></code></pre></div>
<pre><code>##  [1] &quot;nizak&quot;    &quot;visok&quot;    &quot;visok&quot;    &quot;normalan&quot; &quot;normalan&quot; &quot;nizak&quot;   
##  [7] &quot;visok&quot;    &quot;nizak&quot;    &quot;normalan&quot; &quot;normalan&quot;
##  [1] 2 4 4 3 3 2 4 2 3 3</code></pre>
</div>
<hr />
<p>Pretvaranjem faktora u znakovni tip zapravo radimo operaciju inverzne faktorizacije, tj. možemo se vratiti na izvorni znakovni vektor. S druge strane, pretvaranjem faktora u numerički tip, dobit ćemo popis kodiranih brojeva kojima se interni faktor koristi za predstavljanje svake kategorije. Ukoliko želimo, možemo i promijeniti “referentnu” (osnovnu) razinu pomoću funkcije <code>relevel</code>.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="okviri.html#cb170-1" tabindex="-1"></a><span class="co"># A = 1, B = 2, C = 3</span></span>
<span id="cb170-2"><a href="okviri.html#cb170-2" tabindex="-1"></a><span class="fu">relevel</span>(f, <span class="at">ref =</span> <span class="st">&quot;C&quot;</span>)</span>
<span id="cb170-3"><a href="okviri.html#cb170-3" tabindex="-1"></a><span class="co"># C = 1, A = 2, B = 3</span></span></code></pre></div>
<p>U ovom trenutku ovakvo igranje s razinama nema previše svrhe, no kod naprednijih analitičkih metoda ponekad želimo eksplicitno definirati koja je razina referentna, budući da se sve ostale razine na određeni način uspoređuju s njom.</p>
<hr />
<p>Sada se može postaviti jedno pitanje - ima li ikakve koristi od pretvaranja faktora u njegovu znakovnu ili numeričku kopiju?</p>
<p>Općeniti odgovor bio bi - “ne”. Varijable faktora automatski će se ponašati kao znakovi gdje god je to potrebno (na primjer ako želimo filtrirati sva imena s tri slova). S druge strane, interni numerički prikaz je besmislen bez dodatne informacije kojoj kategoriji dani broj zapravo pripada. Međutim, saznanje što se događa kada pretvaramo faktor u znakovni ili numerički vektor može nam pomoći da izbjegnemo posebno nezgodnu pogrešku do koje može doći ako analitičar pogrešno rukuje faktorskim varijablama. Dobra je vijest da je izlaskom inačice R 4.0 mogućnost ove pogreške znatno smanjena, ali još uvijek vrijedi znati što ona podrazumijeva i kako je izbjeći.</p>
<p>Pogreška o kojoj je riječ događa se kada je numerički stupac pogrešno identificiran kao kategorički stupac, što je prije inačice R 4.0 bila relativno česta pojava kada je analitičar dopustio R-u da automatski zaključi vrste stupaca koji se učitavaju iz vanjskog izvora podataka. Obzirom da je nazivna vrijednost parametra <code>stringsAsFactors</code> bila <code>TRUE</code>, ukoliko se ovaj parametar nije naveo R-ov algoritam prepoznavanja tipa stupaca bi prvo razdvojio radi li se o numeričkim ili znakovnim stupcima, a potom bi se znakovni stupci automatski faktorizirali.</p>
<p>Zašto bi ovo predstavljalo problem? Pogledajmo sljedeći primjer, gdje imamo ručno unesene “tablične” podatke gdje jedan unos ima pogrešku ( <code>7.07</code> je greškom umetnut kao <code>7.O7</code>). Simulirajmo što se moglo dogoditi u starijim verzijama R-a.</p>
<div id="primjer-4.1---problem-automatske-kategorizacije" class="section level3 hasAnchor" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> Primjer 4.1 - problem automatske kategorizacije<a href="okviri.html#primjer-4.1---problem-automatske-kategorizacije" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="okviri.html#cb171-1" tabindex="-1"></a><span class="co"># simulirana &quot;pogreška ručnog unosa&quot;</span></span>
<span id="cb171-2"><a href="okviri.html#cb171-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">measures =</span> <span class="fu">c</span>(<span class="st">&quot;1.45&quot;</span>, <span class="st">&quot;5.77&quot;</span>, <span class="st">&quot;1.12&quot;</span>, <span class="st">&quot;7.O7&quot;</span>, <span class="st">&quot;3.23&quot;</span>),</span>
<span id="cb171-3"><a href="okviri.html#cb171-3" tabindex="-1"></a>                 <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>) <span class="co"># imitiramo ponašanje starijih inačica R-a</span></span>
<span id="cb171-4"><a href="okviri.html#cb171-4" tabindex="-1"></a></span>
<span id="cb171-5"><a href="okviri.html#cb171-5" tabindex="-1"></a><span class="co"># analitičar računa prosjek mjera, uočava neobično ponašanje</span></span>
<span id="cb171-6"><a href="okviri.html#cb171-6" tabindex="-1"></a><span class="fu">mean</span>(df<span class="sc">$</span>measures)</span></code></pre></div>
<pre><code>## Warning in mean.default(df$measures): argument is not numeric or logical:
## returning NA</code></pre>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="okviri.html#cb173-1" tabindex="-1"></a><span class="co"># sumnjajući na problem s tipom podatka, analitičar radi</span></span>
<span id="cb173-2"><a href="okviri.html#cb173-2" tabindex="-1"></a><span class="co"># eksplicitnu konverziju stupca u numerički</span></span>
<span id="cb173-3"><a href="okviri.html#cb173-3" tabindex="-1"></a>df<span class="sc">$</span>measures <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(df<span class="sc">$</span>measures)</span>
<span id="cb173-4"><a href="okviri.html#cb173-4" tabindex="-1"></a></span>
<span id="cb173-5"><a href="okviri.html#cb173-5" tabindex="-1"></a><span class="co"># mjere zamjenjuju se numeričkim identifikatorima &quot;kategorija&quot;</span></span>
<span id="cb173-6"><a href="okviri.html#cb173-6" tabindex="-1"></a><span class="co"># stvarni iznosi mjera se nepovratno gube</span></span>
<span id="cb173-7"><a href="okviri.html#cb173-7" tabindex="-1"></a><span class="co"># daljnji numerički izračuni sa ovim stupcem neće rezultirati greškom</span></span>
<span id="cb173-8"><a href="okviri.html#cb173-8" tabindex="-1"></a><span class="co"># ali će biti besmisleni</span></span>
<span id="cb173-9"><a href="okviri.html#cb173-9" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>## [1] NA
##   id measures
## 1  1        2
## 2  2        4
## 3  3        1
## 4  4        5
## 5  5        3</code></pre>
<hr />
</div>
</div>
<div id="zadaci-za-vježbu-2" class="section level2 unnumbered hasAnchor">
<h2>Zadaci za vježbu<a href="okviri.html#zadaci-za-vježbu-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li>U mapi zajedno sa ovom bilježnicom pronađite datoteku <code>mjestoNOHEADER.csv</code> koja predstavlja datoteku istovjetnu datoteci <code>mjesto.csv</code> osim sljedećih značajki:</li>
</ol>
<ul>
<li>nedostaju imena stupaca</li>
<li>korišten je razmak kao razdvojnik</li>
</ul>
<p>Pokušajte uz pomoć dokumentacije učitati podatke iz ove datoteke u varijablu <code>mjestoNH</code> koja će biti istovjetna varijabli <code>mjesto</code> korištenoj u lekciji.</p>
<ol start="2" style="list-style-type: decimal">
<li>U mapi zajedno sa ovom bilježnicom pronađite datoteku <code>racun.csv</code> i učitajte ju u varijablu <code>racun</code>. Pripazite da nizovi znakova nisu automatski pretvoreni u faktore. Ispišite na zaslon:</li>
</ol>
<ul>
<li>broj redaka ove tablice</li>
<li>broj stupaca tablice</li>
<li>imena stupaca tablice</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>Za tablicu <code>racun</code> napravite sljedeće:</li>
</ol>
<ul>
<li>faktorizirajte stupac <code>katArtikl</code></li>
<li>ispišite šifru, naziv i cijenu svih artikala kategorije “slatkisi i grickalice” jeftinijih od 12 Kn</li>
<li>ispišite koliko proizvoda koje kategorije se nalazi u računu</li>
<li>dodajte stupac ukupno koji će sadržavati ukupnu cijenu pojedine stavke uračunavajući i cijenu i količinu</li>
<li>izračunajte ukupni iznos računa</li>
</ul>
<hr />
<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Programirajmo u R-u</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="https://www.fer.unizg.hr/en/damir.pintar" property="cc:attributionName" rel="cc:attributionURL">Damir Pintar</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a>.<br />Based on a work at <a xmlns:dct="http://purl.org/dc/terms/" href="https://ratnip.github.io/FER_OPJR/" rel="dct:source">https://ratnip.github.io/FER_OPJR/</a></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="vektori.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="uvjet.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"],
"google": false,
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed",
"edit": null,
"download": null,
"search": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
