<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>7 Korisnički definirane funkcije | Programirajmo u R-u</title>
  <meta name="description" content="Udžbenik za predmet ‘Osnove statističkog programiranja’ na Fakultetu elektrotehnike i računarstva, Sveučilište u Zagrebu." />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="7 Korisnički definirane funkcije | Programirajmo u R-u" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Udžbenik za predmet ‘Osnove statističkog programiranja’ na Fakultetu elektrotehnike i računarstva, Sveučilište u Zagrebu." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="7 Korisnički definirane funkcije | Programirajmo u R-u" />
  
  <meta name="twitter:description" content="Udžbenik za predmet ‘Osnove statističkog programiranja’ na Fakultetu elektrotehnike i računarstva, Sveučilište u Zagrebu." />
  

<meta name="author" content="Damir Pintar" />


<meta name="date" content="2023-11-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="paketi.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>

<style type="text/css">
.showopt {
  background-color: #004c93;
  color: #FFFFFF; 
  width: 140px;
  height: 4	0px;
  text-align: center;
  vertical-align: middle !important;
  float: right;
  font-family: sans-serif;
  font-size:10 pt;
  border-radius: 8px;
}

.showopt:hover {
    background-color: #dfe4f2;
    color: #004c93;
}

pre.plot {
  background-color: white !important;
}
</style>

<script>
 $(document).ready(function() {

  $chunks = $('.fold');

  $chunks.each(function () {

    // add button to source code chunks
    if ( $(this).hasClass('s') ) {
      $('pre.r', this).prepend("<div class=\"showopt\">Prikaži rješenje</div><br style=\"line-height:22px;\"/>");
      $('pre.r', this).children('code').attr('class', 'folded');
    }

    // add button to output chunks
    if ( $(this).hasClass('o') ) {
      $('pre:not(.r)', this).has('code').prepend("<div class=\"showopt\">Prikaži ispis</div><br style=\"line-height:22px;\"/>");
      $('pre:not(.r)', this).children('code:not(r)').addClass('folded');

      // add button to plots
      $(this).find('img').wrap('<pre class=\"plot\"></pre>');
      $('pre.plot', this).prepend("<div class=\"showopt\">Prikaži sliku</div><br style=\"line-height:22px;\"/>");
      $('pre.plot', this).children('img').addClass('folded');

    }
  });

  // hide all chunks when document is loaded
  $('.folded').css('display', 'none')

  // function to toggle the visibility
  $('.showopt').click(function() {
    var label = $(this).html();
    if (label.indexOf("Prikaži") >= 0) {
      $(this).html(label.replace("Prikaži", "Sakrij"));
    } else {
      $(this).html(label.replace("Sakrij", "Prikaži"));
    }
    $(this).siblings('code, img').slideToggle('fast', 'swing');
  });
});
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>(Udžbenik za predmet “Osnove statističkog programiranja”)</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#predgovor"><i class="fa fa-check"></i>Predgovor</a></li>
</ul></li>
<li class="part"><span><b>I Osnovni elementi jezika R</b></span></li>
<li class="chapter" data-level="1" data-path="uvod.html"><a href="uvod.html"><i class="fa fa-check"></i><b>1</b> Uvod</a>
<ul>
<li class="chapter" data-level="1.1" data-path="uvod.html"><a href="uvod.html#što-je-programski-jezik-r"><i class="fa fa-check"></i><b>1.1</b> Što je programski jezik R?</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="uvod.html"><a href="uvod.html#općenito-o-r-u"><i class="fa fa-check"></i><b>1.1.1</b> Općenito o R-u</a></li>
<li class="chapter" data-level="1.1.2" data-path="uvod.html"><a href="uvod.html#alternative-jeziku-r"><i class="fa fa-check"></i><b>1.1.2</b> Alternative jeziku R</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="uvod.html"><a href="uvod.html#instalacija-programske-podrške"><i class="fa fa-check"></i><b>1.2</b> Instalacija programske podrške</a></li>
<li class="chapter" data-level="1.3" data-path="uvod.html"><a href="uvod.html#pregled-razvojnog-sučelja-rstudio"><i class="fa fa-check"></i><b>1.3</b> Pregled razvojnog sučelja <em>RStudio</em></a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="uvod.html"><a href="uvod.html#interaktivna-konzola"><i class="fa fa-check"></i><b>1.3.1</b> Interaktivna konzola</a></li>
<li class="chapter" data-level="1.3.2" data-path="uvod.html"><a href="uvod.html#pisanje-r-skripti"><i class="fa fa-check"></i><b>1.3.2</b> Pisanje R skripti</a></li>
<li class="chapter" data-level="1.3.3" data-path="uvod.html"><a href="uvod.html#instalacija-dodatnih-paketa"><i class="fa fa-check"></i><b>1.3.3</b> Instalacija dodatnih paketa</a></li>
<li class="chapter" data-level="1.3.4" data-path="uvod.html"><a href="uvod.html#r-markdown"><i class="fa fa-check"></i><b>1.3.4</b> <em>R Markdown</em></a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="uvod.html"><a href="uvod.html#organizacija-procesa-podatkovne-analize-uz-r-i-rstudio"><i class="fa fa-check"></i><b>1.4</b> Organizacija procesa podatkovne analize uz R i RStudio</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="uvod.html"><a href="uvod.html#poželjne-karakteristike-procesa-analize-podataka"><i class="fa fa-check"></i><b>1.4.1</b> Poželjne karakteristike procesa analize podataka</a></li>
<li class="chapter" data-level="1.4.2" data-path="uvod.html"><a href="uvod.html#organizacija-mapa-za-potrebe-analize-podataka"><i class="fa fa-check"></i><b>1.4.2</b> Organizacija mapa za potrebe analize podataka</a></li>
<li class="chapter" data-level="1.4.3" data-path="uvod.html"><a href="uvod.html#pojam-projekta"><i class="fa fa-check"></i><b>1.4.3</b> Pojam projekta</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="uvod.html"><a href="uvod.html#kako-koristiti-ovaj-udžbenik"><i class="fa fa-check"></i><b>1.5</b> Kako koristiti ovaj udžbenik?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="tipovi.html"><a href="tipovi.html"><i class="fa fa-check"></i><b>2</b> Osnovni tipovi podataka</a>
<ul>
<li class="chapter" data-level="2.1" data-path="tipovi.html"><a href="tipovi.html#osnovni-tipovi-podataka"><i class="fa fa-check"></i><b>2.1</b> Osnovni tipovi podataka</a></li>
<li class="chapter" data-level="2.2" data-path="tipovi.html"><a href="tipovi.html#operatori"><i class="fa fa-check"></i><b>2.2</b> Operatori</a></li>
<li class="chapter" data-level="2.3" data-path="tipovi.html"><a href="tipovi.html#nedostajuće-nepoznate-i-nemoguće-vrijednosti"><i class="fa fa-check"></i><b>2.3</b> Nedostajuće, nepoznate i nemoguće vrijednosti</a></li>
<li class="chapter" data-level="" data-path="tipovi.html"><a href="tipovi.html#zadaci-za-vježbu"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="vektori.html"><a href="vektori.html"><i class="fa fa-check"></i><b>3</b> Vektori, matrice i liste</a>
<ul>
<li class="chapter" data-level="3.1" data-path="vektori.html"><a href="vektori.html#vektori-1"><i class="fa fa-check"></i><b>3.1</b> Vektori</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="vektori.html"><a href="vektori.html#stvaranje-vektora"><i class="fa fa-check"></i><b>3.1.1</b> Stvaranje vektora</a></li>
<li class="chapter" data-level="3.1.2" data-path="vektori.html"><a href="vektori.html#operator"><i class="fa fa-check"></i><b>3.1.2</b> Operator <code>[</code></a></li>
<li class="chapter" data-level="3.1.3" data-path="vektori.html"><a href="vektori.html#principi-vektorizacije-i-recikliranja"><i class="fa fa-check"></i><b>3.1.3</b> Principi vektorizacije i recikliranja</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="vektori.html"><a href="vektori.html#indeksni-vektori"><i class="fa fa-check"></i><b>3.2</b> Indeksni vektori</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="vektori.html"><a href="vektori.html#lokacijsko-referenciranje"><i class="fa fa-check"></i><b>3.2.1</b> Lokacijsko referenciranje</a></li>
<li class="chapter" data-level="3.2.2" data-path="vektori.html"><a href="vektori.html#uvjetno-referenciranje"><i class="fa fa-check"></i><b>3.2.2</b> Uvjetno referenciranje</a></li>
<li class="chapter" data-level="3.2.3" data-path="vektori.html"><a href="vektori.html#imensko-referenciranje"><i class="fa fa-check"></i><b>3.2.3</b> Imensko referenciranje</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="vektori.html"><a href="vektori.html#matrice-i-polja"><i class="fa fa-check"></i><b>3.3</b> Matrice i polja</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="vektori.html"><a href="vektori.html#rezanje-matrica"><i class="fa fa-check"></i><b>3.3.1</b> Rezanje matrica</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="vektori.html"><a href="vektori.html#liste"><i class="fa fa-check"></i><b>3.4</b> Liste</a></li>
<li class="chapter" data-level="" data-path="vektori.html"><a href="vektori.html#zadaci-za-vježbu-1"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="okviri.html"><a href="okviri.html"><i class="fa fa-check"></i><b>4</b> Podatkovni okviri i faktori</a>
<ul>
<li class="chapter" data-level="4.1" data-path="okviri.html"><a href="okviri.html#podatkovni-okviri"><i class="fa fa-check"></i><b>4.1</b> Podatkovni okviri</a></li>
<li class="chapter" data-level="4.2" data-path="okviri.html"><a href="okviri.html#odabir-redaka-i-stupaca-podatkovnih-okvira"><i class="fa fa-check"></i><b>4.2</b> Odabir redaka i stupaca podatkovnih okvira</a></li>
<li class="chapter" data-level="4.3" data-path="okviri.html"><a href="okviri.html#dodavanje-i-brisanje-redaka-i-stupaca"><i class="fa fa-check"></i><b>4.3</b> Dodavanje i brisanje redaka i stupaca</a></li>
<li class="chapter" data-level="4.4" data-path="okviri.html"><a href="okviri.html#faktori"><i class="fa fa-check"></i><b>4.4</b> Faktori</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="okviri.html"><a href="okviri.html#primjer-4.1---problem-automatske-kategorizacije"><i class="fa fa-check"></i><b>4.4.1</b> Primjer 4.1 - problem automatske kategorizacije</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="okviri.html"><a href="okviri.html#zadaci-za-vježbu-2"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="uvjet.html"><a href="uvjet.html"><i class="fa fa-check"></i><b>5</b> Uvjetne naredbe i petlje</a>
<ul>
<li class="chapter" data-level="5.1" data-path="uvjet.html"><a href="uvjet.html#naredbe-kontrole-toka"><i class="fa fa-check"></i><b>5.1</b> Naredbe kontrole toka</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="uvjet.html"><a href="uvjet.html#uvjetno-izvođenje-naredbi"><i class="fa fa-check"></i><b>5.1.1</b> Uvjetno izvođenje naredbi</a></li>
<li class="chapter" data-level="5.1.2" data-path="uvjet.html"><a href="uvjet.html#programske-petlje"><i class="fa fa-check"></i><b>5.1.2</b> Programske petlje</a></li>
<li class="chapter" data-level="5.1.3" data-path="uvjet.html"><a href="uvjet.html#petlja-repeat"><i class="fa fa-check"></i><b>5.1.3</b> Petlja <code>repeat</code></a></li>
<li class="chapter" data-level="5.1.4" data-path="uvjet.html"><a href="uvjet.html#petlja-while"><i class="fa fa-check"></i><b>5.1.4</b> Petlja <code>while</code></a></li>
<li class="chapter" data-level="5.1.5" data-path="uvjet.html"><a href="uvjet.html#petlja-for"><i class="fa fa-check"></i><b>5.1.5</b> Petlja <code>for</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="uvjet.html"><a href="uvjet.html#zadaci-za-vježbu-3"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="paketi.html"><a href="paketi.html"><i class="fa fa-check"></i><b>6</b> Paketi, ugrađene funkcije i okoline</a>
<ul>
<li class="chapter" data-level="6.1" data-path="paketi.html"><a href="paketi.html#rad-s-paketima"><i class="fa fa-check"></i><b>6.1</b> Rad s paketima</a></li>
<li class="chapter" data-level="6.2" data-path="paketi.html"><a href="paketi.html#ugrađene-funkcije"><i class="fa fa-check"></i><b>6.2</b> Ugrađene funkcije</a></li>
<li class="chapter" data-level="6.3" data-path="paketi.html"><a href="paketi.html#okoline"><i class="fa fa-check"></i><b>6.3</b> Okoline</a></li>
<li class="chapter" data-level="" data-path="paketi.html"><a href="paketi.html#zadaci-za-vježbu-4"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="korisnik.html"><a href="korisnik.html"><i class="fa fa-check"></i><b>7</b> Korisnički definirane funkcije</a>
<ul>
<li class="chapter" data-level="7.1" data-path="korisnik.html"><a href="korisnik.html#kako-definirati-funkciju"><i class="fa fa-check"></i><b>7.1</b> Kako definirati funkciju</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="korisnik.html"><a href="korisnik.html#princip-kopiranja-kod-izmjene-copy-on-modify"><i class="fa fa-check"></i><b>7.1.1</b> Princip “kopiranja kod izmjene” (copy-on-modify)</a></li>
<li class="chapter" data-level="7.1.2" data-path="korisnik.html"><a href="korisnik.html#funkcija-kao-objekt"><i class="fa fa-check"></i><b>7.1.2</b> Funkcija kao objekt</a></li>
<li class="chapter" data-level="7.1.3" data-path="korisnik.html"><a href="korisnik.html#generičke-funkcije"><i class="fa fa-check"></i><b>7.1.3</b> Generičke funkcije</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="korisnik.html"><a href="korisnik.html#zadaci-za-vježbu-5"><i class="fa fa-check"></i>Zadaci za vježbu</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Programirajmo u R-u</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="korisnik" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">7</span> Korisnički definirane funkcije<a href="korisnik.html#korisnik" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<hr />
<p>Programski jezik R, iako objektnog tipa, u svojoj je srži jezik za funkcijsko programiranje. Ova programska paradigma nije nova (datira još iz 50-tih godina prošlog stoljeća), no u posljednje vrijeme dobiva znatno na popularnosti kao svojevrsni komplement objektno-orijentiranom programiranju, za koje bi se moglo reći da je dominantna programska paradigma u zadnjih nekoliko desetljeća.</p>
<p>Kako ne bi preduboko ulazili u značajke funkcijskog programiranja te provodili detaljnu usporednu analizu sa objektno-orijentiranim principima, navesti ćemo samo nekoliko okvirnih značajki i smjernica vezano uz te dvije paradigme. <strong>Objektno-orijentirano programiranje</strong> u principu program gleda kao <strong>sustav imenica</strong> gdje komponente realiziramo u obliku objekata koji enkapsuliraju atribute spomenute imenice te metoda koje izvršavaju određene zadatke vezane uz navedenu imenicu. Isto tako, objektno-orijentirani sustavi usredotočavaju se na <strong>kontroliranu izmjenu stanja komponenata</strong> informacijskog sustava kao rezultat razmjene poruka između njih. <strong>Funkcijsko programiranje</strong> program gleda kao <strong>sustav glagola</strong> gdje funkcije, tj zadaci koje želimo izvršavati imaju prioritet naspram komponenata nad kojima se ti zadaci izvršavaju. Funkcijsko programiranje modelira informacijski sustav kroz <strong>komponente koje u pravilu ne mijenjaju vlastito stanje</strong>, tako da rezultat programa strogo ovisi o ulazima što olakšava testiranje i održavanje. Ukratko, razlika između objektno-orijentiranog programiranja i funkcijskog programiranje se često navodi na sljedeći način: <em>“Kod objektno-orijentiranog programiranja stvaramo podatke koji sadrže funkcije; kod funkcijskog stvaramo funkcije koje sadrže podatke”</em>.</p>
<p>Za učenje R-a ne moramo se previše zamarati sa karakteristikama funkcijskog programiranja niti biti primorani usvojiti potpuno novu programsku paradigmu. No za uspješno učenje R-a svladavanje nekih koncepata funkcijskog programiranja može se pokazati iznimno korisnim budući da će nam omogućiti pisanje čišćeg i učinkovitijeg programskog koda koji će biti u skladu sa načinom na koji je R kao jezik i dizajniran. U R-u vrijedi sljedeće: <em>funkcije su “punokrvni” objekti</em>, možemo ih <em>referencirati varijablom</em> iz birane okoline, <em>slati u funkcije</em> kao argumente, <em>primati kao povratnu vrijednost</em> funkcije ili <em>pohranjivati u podatkovne strukture</em> kao što je npr. lista. Funkcija u R-u je jednostavno objekt kojeg se može “izvršiti” tj. natjerati da obavi neki posao. Veliki broj funkcija - pogotovo onih koje zamjenjuju konstrukt programske petlje - radi na principu funkcijskih jezika gdje posao obavljamo na način da deklarativno navedemo koju funkciju želimo primijeniti na kojoj podatkovnoj strukturi te pustimo da programski jezik sam obavlja niskorazinske poslove kao što je iteriranje po strukturi i pripremanje rezultata. Primjere ovoga ćemo naučiti uskoro, a sada se prvo upoznajmo sa sintaksom definiranja funkcije u R-u.</p>
<hr />
<div id="kako-definirati-funkciju" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> Kako definirati funkciju<a href="korisnik.html#kako-definirati-funkciju" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>U općenitom slučaju, definicija nove funkcije izgleda ovako:</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="korisnik.html#cb234-1" tabindex="-1"></a>ime_funkcije <span class="ot">&lt;-</span> <span class="cf">function</span>(ulazni argumenti) {</span>
<span id="cb234-2"><a href="korisnik.html#cb234-2" tabindex="-1"></a>    tijelo funkcije</span>
<span id="cb234-3"><a href="korisnik.html#cb234-3" tabindex="-1"></a>}</span></code></pre></div>
<p>Uočimo da kod definicije funkcije koristimo operator <code>&lt;-</code>. Ovo nije slučajno - definicija funkcije nije ništa drugo nego stvaranje objekta klase <code>function</code> kojeg onda pridružujemo određenoj varijabli; ime varijable zapravo je “naziv” funkcije.</p>
<p>U R-u ne definiramo tipove ulaznih i izlaznih argumenata. Ulazni argumenti imaju ime i opcionalnu nazivnu vrijednost. Funkcija formalno vraća jednu vrijednost, što nije nužno restrikcija ukoliko želimo vratiti više vrijednosti - jednostavno ih enkapsuliramo u obliku vektora ili liste. Ključna riječ <code>return</code> je opcionalna - funkcija vraća rezultat zadnjeg izraza u funkciji pa je često dovoljno navesti samo varijablu koja predstavlja povratnu vrijednost kao zadnji red funkcije.</p>
<p>Konačno, ukoliko želimo povećati robusnost funkcije na način da ćemo odbiti izvođenje logike unutar funkcije ako nisu zadovoljeni određeni uvjeti, za to možemo koristiti funkciju <code>stopifnot(&lt;logički izraz&gt;)</code>. Ova funkcija izračunava zadani logički izraz i prekida funkciju ako navedeni uvjet <em>nije istinit</em>.</p>
<hr />
<p><strong>Zadatak 7.1 - prva korisnički definirana funkcija</strong></p>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="korisnik.html#cb235-1" tabindex="-1"></a><span class="co"># napišite funkciju `veci` koja prima dva numerička vektora iste duljine </span></span>
<span id="cb235-2"><a href="korisnik.html#cb235-2" tabindex="-1"></a><span class="co"># i vraća vektor koji sadrži veći od dva elementa na istim mjestima</span></span>
<span id="cb235-3"><a href="korisnik.html#cb235-3" tabindex="-1"></a><span class="co"># ukoliko jedan ili oba vektora nisu numerički ili nisu iste duljine, </span></span>
<span id="cb235-4"><a href="korisnik.html#cb235-4" tabindex="-1"></a><span class="co"># funkcija mora izbaciti grešku</span></span>
<span id="cb235-5"><a href="korisnik.html#cb235-5" tabindex="-1"></a><span class="co"># u funkciji nemojte koristiti petlje</span></span>
<span id="cb235-6"><a href="korisnik.html#cb235-6" tabindex="-1"></a></span>
<span id="cb235-7"><a href="korisnik.html#cb235-7" tabindex="-1"></a><span class="co"># pozovite funkciju `veci` nad kombinacijama vektora</span></span>
<span id="cb235-8"><a href="korisnik.html#cb235-8" tabindex="-1"></a><span class="co"># c(T, F, T) i c(1, 2, 3)</span></span>
<span id="cb235-9"><a href="korisnik.html#cb235-9" tabindex="-1"></a><span class="co"># c(1, 2, 3, 4) i c(5, 6, 7)</span></span>
<span id="cb235-10"><a href="korisnik.html#cb235-10" tabindex="-1"></a><span class="co"># c(1, 2, 3) i c(0, 4, 2)</span></span>
<span id="cb235-11"><a href="korisnik.html#cb235-11" tabindex="-1"></a></span>
<span id="cb235-12"><a href="korisnik.html#cb235-12" tabindex="-1"></a><span class="co"># (preporuka - drugi dio zadatka isprobati direktno u konzoli!)</span></span></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="korisnik.html#cb236-1" tabindex="-1"></a><span class="co"># napišite funkciju `veci` koja prima dva numerička vektora iste duljine </span></span>
<span id="cb236-2"><a href="korisnik.html#cb236-2" tabindex="-1"></a><span class="co"># i vraća vektor koji sadrži veći od dva elementa na istim mjestima</span></span>
<span id="cb236-3"><a href="korisnik.html#cb236-3" tabindex="-1"></a><span class="co"># ukoliko jedan ili oba vektora nisu numerički ili nisu iste duljine, </span></span>
<span id="cb236-4"><a href="korisnik.html#cb236-4" tabindex="-1"></a><span class="co"># funkcija mora izbaciti grešku</span></span>
<span id="cb236-5"><a href="korisnik.html#cb236-5" tabindex="-1"></a><span class="co"># u funkciji nemojte koristiti petlje</span></span>
<span id="cb236-6"><a href="korisnik.html#cb236-6" tabindex="-1"></a></span>
<span id="cb236-7"><a href="korisnik.html#cb236-7" tabindex="-1"></a>veci <span class="ot">&lt;-</span> <span class="cf">function</span>(a, b) {</span>
<span id="cb236-8"><a href="korisnik.html#cb236-8" tabindex="-1"></a>    <span class="fu">stopifnot</span>(<span class="fu">is.numeric</span>(a) <span class="sc">&amp;&amp;</span> <span class="fu">is.numeric</span>(b) <span class="sc">&amp;&amp;</span> <span class="fu">length</span>(a) <span class="sc">==</span> <span class="fu">length</span>(b));</span>
<span id="cb236-9"><a href="korisnik.html#cb236-9" tabindex="-1"></a>    <span class="fu">ifelse</span>(a <span class="sc">&gt;</span> b, a, b)</span>
<span id="cb236-10"><a href="korisnik.html#cb236-10" tabindex="-1"></a>}</span></code></pre></div>
</div>
<hr />
<p>Kod poziva funkcije možemo ali ne moramo navesti imena parametara, a R dozvoljava miješanje imenovanih i neimenovanih parametara (iako to nije nešto što bismo trebali često koristiti u praksi). Kada R bude povezivao poslane vrijednosti sa formalnim parametrima, imenovani parametri imati će prioritet te će se prvi razriješiti, a potom će se redom razrješavati neimenovani parametri.</p>
<p>U ovo se možemo uvjeriti u sljedećem zadatku, u kojem ćemo usput iskoristiti priliku i pokazati rad jedne vrlo često korištene funkcije - <code>paste</code>. Ova funkcija konkatenira znakovne nizove uz dodavanje razmaka (za spajanje bez razmaka postoji alternativna funkcija <code>paste0</code>).</p>
<hr />
<p><strong>Zadatak 7.2 - parametri funkcije</strong></p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="korisnik.html#cb237-1" tabindex="-1"></a>ispisiABC <span class="ot">&lt;-</span> <span class="cf">function</span>(a, b, c) {</span>
<span id="cb237-2"><a href="korisnik.html#cb237-2" tabindex="-1"></a>   <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;A:&quot;</span>, a, <span class="st">&quot;B:&quot;</span>, b, <span class="st">&quot;C:&quot;</span>, c))   </span>
<span id="cb237-3"><a href="korisnik.html#cb237-3" tabindex="-1"></a>}</span>
<span id="cb237-4"><a href="korisnik.html#cb237-4" tabindex="-1"></a></span>
<span id="cb237-5"><a href="korisnik.html#cb237-5" tabindex="-1"></a><span class="co"># razmislite - što ispisuje sljedeći poziv funkcije? </span></span>
<span id="cb237-6"><a href="korisnik.html#cb237-6" tabindex="-1"></a><span class="fu">ispisiABC</span>(<span class="dv">1</span>, <span class="at">a =</span> <span class="dv">2</span>, <span class="dv">3</span>)</span></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="korisnik.html#cb238-1" tabindex="-1"></a>ispisiABC <span class="ot">&lt;-</span> <span class="cf">function</span>(a, b, c) {</span>
<span id="cb238-2"><a href="korisnik.html#cb238-2" tabindex="-1"></a>   <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;A:&quot;</span>, a, <span class="st">&quot;B:&quot;</span>, b, <span class="st">&quot;C:&quot;</span>, c))   </span>
<span id="cb238-3"><a href="korisnik.html#cb238-3" tabindex="-1"></a>}</span>
<span id="cb238-4"><a href="korisnik.html#cb238-4" tabindex="-1"></a></span>
<span id="cb238-5"><a href="korisnik.html#cb238-5" tabindex="-1"></a><span class="fu">ispisiABC</span>(<span class="dv">1</span>, <span class="at">a =</span> <span class="dv">2</span>, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;A: 2 B: 1 C: 3&quot;</code></pre>
</div>
<hr />
<p>U praksi bismo se trebali držati konvencije da prvo koristimo neimenovane parametre, a potom imenovane. Uobičajeno je da postavljamo samo one imenovane parametre čija nazivna vrijednost nam ne odgovara pri čemu strogi raspored nije bitan (iako će praćenje rasporeda zadanog potpisom funkcije povećati čitljivost našeg koda).</p>
<p>Ako želimo napisati funkciju koja prima proizvoljan broj argumenata, koristimo se elementom <code>...</code>, tj. trotočkom. Primjer ovakve funkcije jest gore prikazana ugrađena funkcija <code>paste</code> koja može primiti proizvoljan broj znakovnih nizova. Ako koristimo trotočku u našoj funkciji, u potpisu ju u pravilu stavljamo na kraj liste argumenata, a unutar same funkcije ju potom jednostavno pretvorimo u listu te potom pristupamo njenim parametrima na način koji nam odgovara.</p>
<hr />
<p><strong>Zadatak 7.3 - funkcija sa proizvoljnim brojem parametara</strong></p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="korisnik.html#cb240-1" tabindex="-1"></a>ispisiParametre <span class="ot">&lt;-</span> <span class="cf">function</span>(...) {</span>
<span id="cb240-2"><a href="korisnik.html#cb240-2" tabindex="-1"></a>   parametri <span class="ot">&lt;-</span> <span class="fu">list</span>(...)</span>
<span id="cb240-3"><a href="korisnik.html#cb240-3" tabindex="-1"></a>   <span class="cf">for</span> (p <span class="cf">in</span> parametri) <span class="fu">print</span>(p)</span>
<span id="cb240-4"><a href="korisnik.html#cb240-4" tabindex="-1"></a>}</span>
<span id="cb240-5"><a href="korisnik.html#cb240-5" tabindex="-1"></a></span>
<span id="cb240-6"><a href="korisnik.html#cb240-6" tabindex="-1"></a><span class="co"># pozovite gornju funkciju sa proizvoljnim parametrima</span></span></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="korisnik.html#cb241-1" tabindex="-1"></a><span class="fu">ispisiParametre</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>), <span class="dv">5</span>, T, <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">y =</span> <span class="fu">c</span>(T, F)))</span></code></pre></div>
<pre><code>## [1] 1 2 3
## [1] 5
## [1] TRUE
##   x     y
## 1 1  TRUE
## 2 2 FALSE</code></pre>
</div>
<hr />
<p>Za kraj, prisjetimo se priče o S3 objektima i činjenice da R nema formalni sustav stvaranja i korištenja objekata, ali da se preporučuje korištenje zasebne konstruktorske funkcije koja zamjenjuje “ručno” slaganje objekta i deklariranje njegove klase. Sada kada znamo stvoriti vlastitu funkciju možemo pogledati kako bi izgledao mogući konstruktor klase <code>Osoba</code>.</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="korisnik.html#cb243-1" tabindex="-1"></a><span class="co"># konstruktor klase osoba</span></span>
<span id="cb243-2"><a href="korisnik.html#cb243-2" tabindex="-1"></a></span>
<span id="cb243-3"><a href="korisnik.html#cb243-3" tabindex="-1"></a>Osoba <span class="ot">&lt;-</span> <span class="cf">function</span>(oib, prezime, tezina) {</span>
<span id="cb243-4"><a href="korisnik.html#cb243-4" tabindex="-1"></a></span>
<span id="cb243-5"><a href="korisnik.html#cb243-5" tabindex="-1"></a>    <span class="fu">stopifnot</span>(<span class="fu">is.character</span>(oib))</span>
<span id="cb243-6"><a href="korisnik.html#cb243-6" tabindex="-1"></a>    <span class="fu">stopifnot</span>(<span class="fu">is.character</span>(prezime))</span>
<span id="cb243-7"><a href="korisnik.html#cb243-7" tabindex="-1"></a>    <span class="fu">stopifnot</span>(<span class="fu">is.numeric</span>(tezina) <span class="sc">&amp;&amp;</span> tezina <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb243-8"><a href="korisnik.html#cb243-8" tabindex="-1"></a></span>
<span id="cb243-9"><a href="korisnik.html#cb243-9" tabindex="-1"></a>    o <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">oib =</span> oib, <span class="at">prezime =</span> prezime, <span class="at">tezina =</span> tezina)</span>
<span id="cb243-10"><a href="korisnik.html#cb243-10" tabindex="-1"></a>    <span class="fu">class</span>(o) <span class="ot">&lt;-</span> <span class="st">&quot;Osoba&quot;</span></span>
<span id="cb243-11"><a href="korisnik.html#cb243-11" tabindex="-1"></a></span>
<span id="cb243-12"><a href="korisnik.html#cb243-12" tabindex="-1"></a>    o</span>
<span id="cb243-13"><a href="korisnik.html#cb243-13" tabindex="-1"></a>}</span></code></pre></div>
<p>Pokušajmo uz pomoć prikazanog konstruktora stvoriti novi objekt klase <code>Osoba</code>.</p>
<hr />
<p><strong>Zadatak 7.4 - konstruktorska funkcija</strong></p>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="korisnik.html#cb244-1" tabindex="-1"></a><span class="co"># stvorite varijablu `ivo` koja će biti klase `Osoba` a koja će imati sljedeće vrijednosti atributa:</span></span>
<span id="cb244-2"><a href="korisnik.html#cb244-2" tabindex="-1"></a><span class="co"># OIB: 1357135713, prezime: Ivić, tezina: 76</span></span>
<span id="cb244-3"><a href="korisnik.html#cb244-3" tabindex="-1"></a></span>
<span id="cb244-4"><a href="korisnik.html#cb244-4" tabindex="-1"></a><span class="co"># ispišite varijablu `ivo`</span></span></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="korisnik.html#cb245-1" tabindex="-1"></a>ivo <span class="ot">&lt;-</span> <span class="fu">Osoba</span>(<span class="st">&quot;135135713&quot;</span>, <span class="st">&quot;Ivić&quot;</span>, <span class="dv">76</span>)</span>
<span id="cb245-2"><a href="korisnik.html#cb245-2" tabindex="-1"></a></span>
<span id="cb245-3"><a href="korisnik.html#cb245-3" tabindex="-1"></a>ivo</span></code></pre></div>
<pre><code>## $oib
## [1] &quot;135135713&quot;
## 
## $prezime
## [1] &quot;Ivić&quot;
## 
## $tezina
## [1] 76
## 
## attr(,&quot;class&quot;)
## [1] &quot;Osoba&quot;</code></pre>
</div>
<hr />
<p>Prednost konstruktora je dodatna robustnost u vidu točno definiranih imena atributa ali i mogućnosti ugrađivanja i dodatnih kontrola (npr. <code>OIB</code> i <code>prezime</code> moraju biti znakovni nizovi dok <code>tezina</code> mora biti realni broj i sl.). Ukoliko stvaramo vlastite S3 objekte, preporuka je da za njih definiramo pripadajuće konstruktorske funkcije.</p>
<hr />
<div id="princip-kopiranja-kod-izmjene-copy-on-modify" class="section level3 hasAnchor" number="7.1.1">
<h3><span class="header-section-number">7.1.1</span> Princip “kopiranja kod izmjene” (copy-on-modify)<a href="korisnik.html#princip-kopiranja-kod-izmjene-copy-on-modify" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Jedno od češćih pitanja koje se postavlja kod učenja novih programskih jezika jest da li funkcije rade na način “poziva preko vrijednosti” (engl. <em>call-by-value</em>) ili “poziva preko reference” (engl. <em>call-by-reference</em>). Razlika se svodi na sposobnost funkcije da mijenja vrijednosti varijabli koje su poslane na mjestu formalnih argumenata funkcije; kod <em>call-by-value</em> principa u funkciju se šalju samo “vrijednosti” parametara, tj. “kopije” originalnih argumenata. S druge strane, kod “<em>call-by-reference</em>” principa funkcija prima “reference” originalnih varijabli, tj. ponaša se kao da su originalne varijable proslijeđene funkciji i sve izmjene nad njima odraziti će se u pozivajućem programu.</p>
<p>Jezik R koristi hibridni princip poznat po nazivom “kopiranje kod izmjene” (engl. <em>copy-on-modify</em>). Kod ovog principa u funkciju se prosljeđuju reference argumenata, što nam omogućuje da prenosimo i “velike” varijable bez straha da će doći do nepotrebnog kopiranja. No ovo vrijedi samo ukoliko funkcija ne mijenja vrijednost dobivenih varijabli - u trenutku kada funkcija pokuša provesti bilo kakvu izmjenu, provodi se kopiranje varijable i funkcija dalje nastavlja rad na kopiji. Zbog ovoga se kaže da R kao takav ne podržava <em>call-by-reference</em> (jedan razlog uvođenja objekata tipa “<em>reference classes</em>” tj. RC objekata u jezik R upravo je uvođenje ovog principa).</p>
<p>Provjerimo gore navedene tvrdnje na konkretnom primjeru.</p>
<hr />
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="korisnik.html#cb247-1" tabindex="-1"></a><span class="co"># pokušaj izmjene varijable iz pozivajuće okoline</span></span>
<span id="cb247-2"><a href="korisnik.html#cb247-2" tabindex="-1"></a></span>
<span id="cb247-3"><a href="korisnik.html#cb247-3" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb247-4"><a href="korisnik.html#cb247-4" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">&quot;x u funkciji:&quot;</span>, x, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb247-5"><a href="korisnik.html#cb247-5" tabindex="-1"></a>    x <span class="ot">&lt;-</span> x <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb247-6"><a href="korisnik.html#cb247-6" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">&quot;x nakon izmjene:&quot;</span>, x, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb247-7"><a href="korisnik.html#cb247-7" tabindex="-1"></a>}</span>
<span id="cb247-8"><a href="korisnik.html#cb247-8" tabindex="-1"></a></span>
<span id="cb247-9"><a href="korisnik.html#cb247-9" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb247-10"><a href="korisnik.html#cb247-10" tabindex="-1"></a><span class="fu">f</span>()</span>
<span id="cb247-11"><a href="korisnik.html#cb247-11" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;x nakon povratka:&quot;</span>, x, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<pre><code>## x u funkciji: 5 
## x nakon izmjene: 6 
## x nakon povratka: 5</code></pre>
<hr />
<p>Funkcija pri izvođenju stvara <strong>privremenu vlastitu okolinu</strong> unutar koje se pohranjuju “lokalne” varijable. U gornjem primjeru unutar tijela funkcije <code>f</code> pojavljuje se varijabla <code>x</code> koja “maskira” vanjsku varijablu <code>x</code> tako da se sve izmjene više ne odražavaju na vrijednost vanjske varijable. Važno je uočiti da funkcija pristupa vanjskoj varijabli čak i bez njenog slanja u funkciju, budući da referenciranje varijable <code>x</code> koja ne postoji u lokalnoj okolini funkcije R pretragu nastavio u okolini roditelju što bi u ovom slučaju bila globalna okolina. Pokušaj izmjene ove varijable ipak ne uspijeva - R <strong>detektira pokušaj izmjene varijable i stvara lokalnu kopiju istog imena</strong>.</p>
<p>Da li ovo znači da funkcija nikada ne može mijenjati varijable iz pozivajuće okoline? Naravno da ne - jedan od načina kako ovo izvesti jest taj da funkciji pošaljemo referencu na okolinu unutar kojeg se nalazi objekt kojeg mijenjamo (ili pustimo funkciju da sama dohvati referencu na globalnu okolinu ukoliko se varijabla tamo nalazi).</p>
<hr />
<p><strong>Zadatak 7.5 - izmjena varijable globalne okoline</strong></p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="korisnik.html#cb249-1" tabindex="-1"></a><span class="co"># implementirajte funkciju f tako da dohvati referencu na globalnu okolinu </span></span>
<span id="cb249-2"><a href="korisnik.html#cb249-2" tabindex="-1"></a><span class="co"># i poveća &quot;vanjski&quot; x za 1</span></span>
<span id="cb249-3"><a href="korisnik.html#cb249-3" tabindex="-1"></a></span>
<span id="cb249-4"><a href="korisnik.html#cb249-4" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb249-5"><a href="korisnik.html#cb249-5" tabindex="-1"></a><span class="co"># pozovite f(x) i ispisite x</span></span></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="korisnik.html#cb250-1" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb250-2"><a href="korisnik.html#cb250-2" tabindex="-1"></a>  e <span class="ot">&lt;-</span> <span class="fu">globalenv</span>()</span>
<span id="cb250-3"><a href="korisnik.html#cb250-3" tabindex="-1"></a>  e<span class="sc">$</span>x <span class="ot">&lt;-</span> e<span class="sc">$</span>x <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb250-4"><a href="korisnik.html#cb250-4" tabindex="-1"></a>}</span>
<span id="cb250-5"><a href="korisnik.html#cb250-5" tabindex="-1"></a></span>
<span id="cb250-6"><a href="korisnik.html#cb250-6" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb250-7"><a href="korisnik.html#cb250-7" tabindex="-1"></a><span class="fu">f</span>()</span>
<span id="cb250-8"><a href="korisnik.html#cb250-8" tabindex="-1"></a><span class="fu">print</span>(x)</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
</div>
<hr />
<p>Jednostavniji način rješavanja gornjeg zadatka bio bi korištenjem operatora <code>&lt;&lt;-</code>. Ovo je tzv. “operator dodjele vanjskom opsegu” (engl. <em>scoping assignment operator</em>), a njegova funkcija jest da izmjeni varijablu zadanog imena koja se nalazi ’negdje” na stazi pretrage. R ide sekvencijalno po stazi pretrage i mijenja prvu pojavu navedene varijable. Ukoliko varijabla tog naziva ne postoji nigdje u stazi pretrage, R će stvoriti novu varijablu u prvoj okolini iznad okoline funkcije.</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="korisnik.html#cb252-1" tabindex="-1"></a><span class="co"># operator `&lt;&lt;-`</span></span>
<span id="cb252-2"><a href="korisnik.html#cb252-2" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb252-3"><a href="korisnik.html#cb252-3" tabindex="-1"></a>    x <span class="ot">&lt;&lt;-</span> <span class="dv">7</span></span>
<span id="cb252-4"><a href="korisnik.html#cb252-4" tabindex="-1"></a>    x <span class="ot">&lt;-</span> <span class="dv">6</span></span>
<span id="cb252-5"><a href="korisnik.html#cb252-5" tabindex="-1"></a>}</span>
<span id="cb252-6"><a href="korisnik.html#cb252-6" tabindex="-1"></a></span>
<span id="cb252-7"><a href="korisnik.html#cb252-7" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb252-8"><a href="korisnik.html#cb252-8" tabindex="-1"></a><span class="fu">f</span>()</span>
<span id="cb252-9"><a href="korisnik.html#cb252-9" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] 7</code></pre>
<p>Ovaj operator je potencijalno nepredvidiv tako da ćemo veću robusnost ipak postići korištenjem funkcije <code>assign</code> ili operatora <code>$</code> uz referencu na okolinu gdje se nalazi varijabla koju želimo mijenjati.</p>
<p>Za kraj spomenimo samo jedno svojstvo funkcija u R-u - tzv. “lijena evaluacija” (engl. <em>lazy evaluation</em>). Ovo jednostavno znači da R neće evaluirati primljeni parametar sve do trenutka kada ga eksplicitno koristimo. Do tog trenutka taj objekt je tzv. “obećanje” (engl. <em>promise</em>) - R “zna” kako evaluirati taj objekt ali to ne radi dok zaista ne treba a do tada imamo samo njegovo obećanje da će to učiniti :) . Na ovaj način povećava se učinkovitost jezika; ako se neki parametar koristi samo u nekoj uvjetnoj grani, onda se u scenarijima kada on nije potreban neće na njega trošiti memorija. No isto tako, moramo biti oprezni jer lijena evaluacija može dovesti do neočekivanih problema ako ne vodimo računa o njenom postojanju.</p>
</div>
<div id="funkcija-kao-objekt" class="section level3 hasAnchor" number="7.1.2">
<h3><span class="header-section-number">7.1.2</span> Funkcija kao objekt<a href="korisnik.html#funkcija-kao-objekt" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Već smo rekli da R ima kvalitetnu podršku za tzv. “funkcionalno programiranje” što predstavlja programsku paradigmu koja naglasak stavlja na dizajniranje funkcija bez oslanjanja na objekte sa izmjenjivim stanjima. Jedna od karakteristika ovakvih jezika su i tzv. “funkcije prve klase” (engl. <em>first class functions</em>), što zapravo znači da jezik podržava definiciju funkcija na način da su one ravnopravni objekti svim drugim tipovima objekata - mogu se pohraniti u varijablu, koristiti kao ulazni argument druge funkcije ili kao njezina povratna vrijednost, pohranjivati u druge podatkovne strukture i sl. Iako koncepti funkcionalnog programiranja izlaze iz okvira gradiva kojeg želimo prikazati, činjenicu da R tretira funkcije kao sve druge objekte je vrlo važno znati budući da se ova činjenica iznimno često koristi kod programiranja u jeziku R.</p>
<p>Pokažimo ovo na trivijalnom primjeru. Znamo da R nudi funkciju <code>sum</code> unutar paketa <code>base</code> koja računa aritmetičku sumu elemenata vektora koje joj proslijedimo. No <code>sum</code> je zapravo <em>ime varijable</em> koja referencira kod koji implementira dotičnu funkciju. Ukoliko želimo, možemo vrlo lako pridružiti ovu funkciju nekoj drugoj varijabli čime smo joj efektivno “promijenili ime” ili bolje reći dodali alternativni način pozivanja iz potpuno druge okoline.</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="korisnik.html#cb254-1" tabindex="-1"></a>zbroji <span class="ot">&lt;-</span> sum</span>
<span id="cb254-2"><a href="korisnik.html#cb254-2" tabindex="-1"></a></span>
<span id="cb254-3"><a href="korisnik.html#cb254-3" tabindex="-1"></a><span class="fu">zbroji</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)  <span class="co"># isto kao sum(1:10)</span></span></code></pre></div>
<p>Ovo je najlakše shvatiti na način da je funkcija jednostavno “varijabla koja se može pozvati”, pri čemu pod “pozivom” smatramo korištenje sintakse koja uključuje referencu na funkciju i ulazne argumente uokvirene u zagrade, a koja će nakon izvršavanja u R okolini vratiti nekakvu vrijednost.</p>
<hr />
<p>Funkcija može uredno vraćati i neku drugu funkciju.</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="korisnik.html#cb255-1" tabindex="-1"></a>stvoriteljFje <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb255-2"><a href="korisnik.html#cb255-2" tabindex="-1"></a>    f <span class="ot">&lt;-</span> <span class="cf">function</span>(x) x <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb255-3"><a href="korisnik.html#cb255-3" tabindex="-1"></a>    <span class="fu">return</span>(f)</span>
<span id="cb255-4"><a href="korisnik.html#cb255-4" tabindex="-1"></a>}</span>
<span id="cb255-5"><a href="korisnik.html#cb255-5" tabindex="-1"></a></span>
<span id="cb255-6"><a href="korisnik.html#cb255-6" tabindex="-1"></a>novaFja <span class="ot">&lt;-</span> <span class="fu">stvoriteljFje</span>() <span class="co"># dobili smo funkciju &quot;dodavanja jedinice&quot;</span></span>
<span id="cb255-7"><a href="korisnik.html#cb255-7" tabindex="-1"></a><span class="fu">novaFja</span>(<span class="dv">5</span>)  </span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<p>Funkcija je jednostavno stvorila novu funkciju i vratila ju pozivajućem programu kao što bi učinila sa bilo kojim drugim objektom. Povratnu vrijednost spremili smo u varijablu koja je sad “pozivljiva” - ako joj dodamo zagrade i parametre ona će se izvršiti na način na koji je definirana unutar funkcije koja ju je stvorila.</p>
<p>Uočite da smo mogli iskoristiti činjenicu da funkcija vraća rezultat zadnjeg izraza i funkciju definirati i kraće:</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="korisnik.html#cb257-1" tabindex="-1"></a><span class="co">#kraća definicija</span></span>
<span id="cb257-2"><a href="korisnik.html#cb257-2" tabindex="-1"></a>stvoriteljFje <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb257-3"><a href="korisnik.html#cb257-3" tabindex="-1"></a>    <span class="cf">function</span>(x) x <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb257-4"><a href="korisnik.html#cb257-4" tabindex="-1"></a>}</span></code></pre></div>
<p>Ovakve funkcije često se zovu i “tvornicama” ili “generatorima” funkcija, a za razliku od gornjeg primjera u praksi generatoru funkcija često šaljemo i neke parametre koji određuju kako će se vraćena funkcija ponašati.</p>
<p>Pokušajte samostalno napraviti generator funkcija koji vraća funkcije za množenje sa unaprijed postavljenim parametrom.</p>
<hr />
<p><strong>Zadatak 7.6 - generator funkcija</strong></p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="korisnik.html#cb258-1" tabindex="-1"></a><span class="co"># stvorite funkciju `tvornicaMnozenja` koja stvara funkcije množenja primljenog broja </span></span>
<span id="cb258-2"><a href="korisnik.html#cb258-2" tabindex="-1"></a><span class="co"># sa nekom predefiniranom konstantom</span></span>
<span id="cb258-3"><a href="korisnik.html#cb258-3" tabindex="-1"></a></span>
<span id="cb258-4"><a href="korisnik.html#cb258-4" tabindex="-1"></a><span class="co"># uz pomoć gornje funkcije napravite funkciju `puta2` koja udvostručuje primljeni broj</span></span>
<span id="cb258-5"><a href="korisnik.html#cb258-5" tabindex="-1"></a></span>
<span id="cb258-6"><a href="korisnik.html#cb258-6" tabindex="-1"></a><span class="co"># pozovite funkciju `puta2` s parametrom 3 i ispišite rezultat</span></span></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="korisnik.html#cb259-1" tabindex="-1"></a><span class="co"># stvorite funkciju `tvornicaMnozenja` koja stvara funkcije množenja primljenog broja </span></span>
<span id="cb259-2"><a href="korisnik.html#cb259-2" tabindex="-1"></a><span class="co"># sa nekom predefiniranom konstantom</span></span>
<span id="cb259-3"><a href="korisnik.html#cb259-3" tabindex="-1"></a>tvornicaMnozenja <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb259-4"><a href="korisnik.html#cb259-4" tabindex="-1"></a>  <span class="cf">function</span>(a) a<span class="sc">*</span>x</span>
<span id="cb259-5"><a href="korisnik.html#cb259-5" tabindex="-1"></a>}</span>
<span id="cb259-6"><a href="korisnik.html#cb259-6" tabindex="-1"></a></span>
<span id="cb259-7"><a href="korisnik.html#cb259-7" tabindex="-1"></a><span class="co"># uz pomoć gornje funkcije napravite funkciju `puta2` koja udvostručuje primljeni broj</span></span>
<span id="cb259-8"><a href="korisnik.html#cb259-8" tabindex="-1"></a>puta2 <span class="ot">&lt;-</span> <span class="fu">tvornicaMnozenja</span>(<span class="dv">2</span>)</span>
<span id="cb259-9"><a href="korisnik.html#cb259-9" tabindex="-1"></a></span>
<span id="cb259-10"><a href="korisnik.html#cb259-10" tabindex="-1"></a><span class="co"># pozovite funkciju `puta2` s parametrom 3 i ispišite rezultat</span></span>
<span id="cb259-11"><a href="korisnik.html#cb259-11" tabindex="-1"></a><span class="fu">puta2</span>(<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
</div>
<p>Funkcija <code>tvornicaMnozenja</code> zapravo stvara “porodicu” funkcija koje sve pružaju mogućnost množenja sa odabranim brojem - tj. parametrom kojeg odabire sam programer. Ovakav način upravljanja funkcijama je možda inicijalno zbunjujući, no korištenjem istoga u praksi (što ćemo prikazati već u idućem poglavlju) lako se uočava dodatna fleksibilnost i učinkovitost ovakvog pristupa.</p>
<hr />
<p>Ako definiramo funkciju, a ne pridružimo ju nekoj varijabli, onda smo stvorili tzv. “anonimnu funkciju”.</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="korisnik.html#cb261-1" tabindex="-1"></a><span class="co"># anonimna funkcija</span></span>
<span id="cb261-2"><a href="korisnik.html#cb261-2" tabindex="-1"></a><span class="cf">function</span>(x) x <span class="sc">*</span> x </span></code></pre></div>
<p>Uočimo da je svaka funkcija inicijalno “anonimna”. Ako se vratimo na sintaksu definicije funkcije, vidimo da je ona zapravo kombinacija stvaranja anonimne funkcije i pridjeljivanja iste nekoj varijabli uz operator pridruživanja. Naravno, ostavljanje funkcije anonimnom kao što smo izveli u gornjem primjeru nema previše smisla, isto kao što nema smisla definirati neki vektor ili listu bez pridjeljivanja reference na taj objekt - u tom slučaju stvoreni objekt nije ni na koji način iskoristiv jer nema nijedne poveznice prema njemu te će ga R vrlo brzo obrisati u sklopu rutine “čišćenja smeća”.</p>
<p>Možemo se zapitati - kako onda izgleda scenarij gdje je korištenje anonimne funkcije smisleno i korisno? Eksplicitne anonimne funkcije koristimo kada nam dobro dođe “jednokratna” funkcija, recimo kao argument neke druge funkcije. Ako je funkciju koju želimo poslati kao argument lako definirati u jednom retku, a ne planiramo ju više koristiti u programu, onda nema smisla zasebno ju definirati i dodijeliti joj vlastitu referencu. Primjer ovoga vidjet ćemo u lekciji o <code>apply</code> porodici funkcija.</p>
<hr />
<p>Za kraj ovog dijela ponovimo najbitnije stvari - u R-u je funkcija objekt kao i svaki drugi, jedina specifičnost jest da se radi o objektu koji je “izvršiv”, tj. koji uz korištenje sintakse za poziv funkcije obavlja neki posao i vraća neku vrijednost. Čak i anonimnu funkciju možemo bez problema izvršiti (iako samo jednom, budući da nemamo referencu za njezino ponovno zvanje).</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="korisnik.html#cb262-1" tabindex="-1"></a><span class="co"># anonimna funkcija s pozivom</span></span>
<span id="cb262-2"><a href="korisnik.html#cb262-2" tabindex="-1"></a>(<span class="cf">function</span>(x) x <span class="sc">+</span> <span class="dv">1</span>)(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<hr />
</div>
<div id="generičke-funkcije" class="section level3 hasAnchor" number="7.1.3">
<h3><span class="header-section-number">7.1.3</span> Generičke funkcije<a href="korisnik.html#generičke-funkcije" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Generičke funkcije već smo spominjali u poglavlju o objektima no svejedno se kratko podsjetimo o čemu se zapravo radi. Programski jezik R svoje objektno orijentirane principe ne temelji na takozvanom “principu razmjene poruka” gdje bi npr. poziv za crtanje grafa mogao izgledati ovako:</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="korisnik.html#cb264-1" tabindex="-1"></a><span class="co"># uobičajeni OOP princip poziva metode objekta</span></span>
<span id="cb264-2"><a href="korisnik.html#cb264-2" tabindex="-1"></a><span class="fu">graf.crtaj</span>()</span></code></pre></div>
<p>već ovako:</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="korisnik.html#cb265-1" tabindex="-1"></a><span class="co"># R-ovski princip poziva metode objekta</span></span>
<span id="cb265-2"><a href="korisnik.html#cb265-2" tabindex="-1"></a><span class="fu">crtaj</span>(graf)</span></code></pre></div>
<p>U prvom slučaju graf je objekt koji implementira posebnu metodu za crtanje te koju moramo pozvati kako bi dobili traženu sliku grafa. U drugom postoji “vanjska” funkcija koja “zna” nacrtati graf. Ovu funkciju nazivamo generička funkcija.</p>
<hr />
<p>Općenita svojstva generičke funkcije su sljedeća:</p>
<ul>
<li>funkcija ima intuitivnu, jasno određenu svrhu</li>
<li>očekivani način rada sličan je za više tipova objekata (npr. crtanje će rezultirati slikom)</li>
<li>svaki tip objekta zahtjeva vlastitu implementaciju ovisno o karakteristikama objekta (npr. način crtanja kruga se razlikuje se od načina crtanja kvadrata)</li>
</ul>
<p>Način implementacije generičkih funkcija (za S3 objekte!) zapravo je iznimno jednostavan, što je vjerojatno i razlog njihove široke prihvaćenosti i velike popularnosti u R zajednici. Postupak se svodi na tri jednostavna koraka:</p>
<ul>
<li>izaberemo naziv generičke funkcije (npr. <code>ispisi</code>) i deklariramo da se radi o generičkoj funkciji
<ul>
<li>alternativno, odaberemo neku od postojećih generičkih funkcija</li>
</ul></li>
<li>stvorimo objekt i deklariramo njegovu klasu (npr. <code>Osoba</code>)</li>
<li>implementiramo funkciju naziva <code>ime_gen_fje.ime_klase</code> (npr. <code>ispisi.Osoba</code>)</li>
</ul>
<p>I to je sve! R ne zahtjeva nikakve dodatne korake, gore navedeno je sasvim dovoljno da R prepoznaje novu generičku funkciju i da ju primjenjuje na sve objekte za čiju klasu je implementirana ta generička funkcija u obliku <code>ime_gen_fje.ime_klase</code> (ili <code>ime_gen_fje.default</code> za sve klase za koje ne postoji posebna implementacija).</p>
<p>Pokušajmo u sljedećem zadatku implementirati generičku metodu <code>ispisi</code> za objekt klase <code>Osoba</code>.</p>
<hr />
<p><strong>Zadatak 7.7 - nova generička funkcija</strong></p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="korisnik.html#cb266-1" tabindex="-1"></a>pero <span class="ot">&lt;-</span> <span class="fu">Osoba</span>(<span class="at">oib =</span> <span class="st">&quot;12345678&quot;</span>, <span class="at">prezime =</span> <span class="st">&quot;Peric&quot;</span>, <span class="at">tezina =</span> <span class="dv">78</span>)</span>
<span id="cb266-2"><a href="korisnik.html#cb266-2" tabindex="-1"></a></span>
<span id="cb266-3"><a href="korisnik.html#cb266-3" tabindex="-1"></a><span class="co"># stvaramo novu generičku funkciju `ispisi` uz pomoć funkcije `UseMethod`</span></span>
<span id="cb266-4"><a href="korisnik.html#cb266-4" tabindex="-1"></a>ispisi <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">UseMethod</span>(<span class="st">&quot;ispisi&quot;</span>)</span>
<span id="cb266-5"><a href="korisnik.html#cb266-5" tabindex="-1"></a></span>
<span id="cb266-6"><a href="korisnik.html#cb266-6" tabindex="-1"></a><span class="co"># implementirajte funkciju naziva `ispisi.Osoba` koja prima jedan parametar (očekivano klase `Osoba`)</span></span>
<span id="cb266-7"><a href="korisnik.html#cb266-7" tabindex="-1"></a><span class="co"># te na zaslon ispisuje podatke o osobi na sljedeći način:</span></span>
<span id="cb266-8"><a href="korisnik.html#cb266-8" tabindex="-1"></a><span class="co"># OIB: &lt;oib&gt;, Prezime: &lt;prezime&gt;, tezina: &lt;tezina&gt;</span></span>
<span id="cb266-9"><a href="korisnik.html#cb266-9" tabindex="-1"></a><span class="co"># za slaganje ispisa koristite funkciju `paste`</span></span>
<span id="cb266-10"><a href="korisnik.html#cb266-10" tabindex="-1"></a><span class="co"># a za sam ispis funkciju `cat`</span></span>
<span id="cb266-11"><a href="korisnik.html#cb266-11" tabindex="-1"></a></span>
<span id="cb266-12"><a href="korisnik.html#cb266-12" tabindex="-1"></a><span class="co"># implementirajte funkciju naziva ispisi.default koja prima jedan parametar</span></span>
<span id="cb266-13"><a href="korisnik.html#cb266-13" tabindex="-1"></a><span class="co"># i ispisuje ga na zaslon uz pomoć funkcije `cat`</span></span>
<span id="cb266-14"><a href="korisnik.html#cb266-14" tabindex="-1"></a></span>
<span id="cb266-15"><a href="korisnik.html#cb266-15" tabindex="-1"></a><span class="co"># ispišite varijablu `pero` uz pomoć generičke funkcije `ispisi`</span></span>
<span id="cb266-16"><a href="korisnik.html#cb266-16" tabindex="-1"></a></span>
<span id="cb266-17"><a href="korisnik.html#cb266-17" tabindex="-1"></a><span class="co"># ispišite vektor c(1, 2, 3, 4, 5) uz pomoć generičke funkcije `ispisi`</span></span></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="korisnik.html#cb267-1" tabindex="-1"></a><span class="co"># implementirajte funkciju naziva `ispisi.Osoba` koja prima jedan parametar (očekivano klase `Osoba`)</span></span>
<span id="cb267-2"><a href="korisnik.html#cb267-2" tabindex="-1"></a><span class="co"># te na zaslon ispisuje podatke o osobi na sljedeći način:</span></span>
<span id="cb267-3"><a href="korisnik.html#cb267-3" tabindex="-1"></a><span class="co"># OIB: &lt;oib&gt;, Prezime: &lt;prezime&gt;, tezina: &lt;tezina&gt;</span></span>
<span id="cb267-4"><a href="korisnik.html#cb267-4" tabindex="-1"></a><span class="co"># za slaganje ispisa koristite funkciju `paste`</span></span>
<span id="cb267-5"><a href="korisnik.html#cb267-5" tabindex="-1"></a><span class="co"># a za sam ispis funkciju `cat`</span></span>
<span id="cb267-6"><a href="korisnik.html#cb267-6" tabindex="-1"></a>ispisi.Osoba <span class="ot">&lt;-</span> <span class="cf">function</span>(o) {</span>
<span id="cb267-7"><a href="korisnik.html#cb267-7" tabindex="-1"></a>    rez <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;OIB:&quot;</span>, o<span class="sc">$</span>oib, <span class="st">&quot;, Prezime:&quot;</span>, o<span class="sc">$</span>prezime, <span class="st">&quot;, tezina:&quot;</span>, o<span class="sc">$</span>tezina, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb267-8"><a href="korisnik.html#cb267-8" tabindex="-1"></a>    <span class="fu">cat</span>(rez)</span>
<span id="cb267-9"><a href="korisnik.html#cb267-9" tabindex="-1"></a>}</span>
<span id="cb267-10"><a href="korisnik.html#cb267-10" tabindex="-1"></a></span>
<span id="cb267-11"><a href="korisnik.html#cb267-11" tabindex="-1"></a><span class="co"># implementirajte funkciju naziva ispisi.default koja prima jedan parametar</span></span>
<span id="cb267-12"><a href="korisnik.html#cb267-12" tabindex="-1"></a><span class="co"># i ispisuje ga na zaslon uz pomoć funkcije `cat`</span></span>
<span id="cb267-13"><a href="korisnik.html#cb267-13" tabindex="-1"></a>ispisi.default <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">cat</span>(x)</span>
<span id="cb267-14"><a href="korisnik.html#cb267-14" tabindex="-1"></a></span>
<span id="cb267-15"><a href="korisnik.html#cb267-15" tabindex="-1"></a><span class="co"># ispišite varijablu `pero` uz pomoć generičke funkcije `ispisi`</span></span>
<span id="cb267-16"><a href="korisnik.html#cb267-16" tabindex="-1"></a><span class="fu">ispisi</span>(pero)</span>
<span id="cb267-17"><a href="korisnik.html#cb267-17" tabindex="-1"></a></span>
<span id="cb267-18"><a href="korisnik.html#cb267-18" tabindex="-1"></a><span class="co"># ispišite vektor c(1, 2, 3, 4, 5) uz pomoć generičke funkcije `ispisi`</span></span>
<span id="cb267-19"><a href="korisnik.html#cb267-19" tabindex="-1"></a><span class="fu">ispisi</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>## OIB: 12345678 , Prezime: Peric , tezina: 78 
## 1 2 3 4 5</code></pre>
</div>
<hr />
<p>Naravno, nismo morali nužno stvoriti vlastitu funkciju ispisi - vjerojatno bi bolji odabir bio korištenje već postojećih generičkih funkcija kao to su <code>print</code> ili <code>cat</code>.</p>
<hr />
<p><strong>Zadatak 7.8 - korištenje postojećih generičkih funkcija</strong></p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="korisnik.html#cb269-1" tabindex="-1"></a><span class="co"># provjerite da li je print generička funkcija </span></span>
<span id="cb269-2"><a href="korisnik.html#cb269-2" tabindex="-1"></a><span class="co"># (jednostavno ispišite njezin izvorni kod navođenjem samog imena funkcije)</span></span>
<span id="cb269-3"><a href="korisnik.html#cb269-3" tabindex="-1"></a></span>
<span id="cb269-4"><a href="korisnik.html#cb269-4" tabindex="-1"></a><span class="co"># omogućite ispis klase `Osoba` uz pomoć generičke funkcije `print`</span></span>
<span id="cb269-5"><a href="korisnik.html#cb269-5" tabindex="-1"></a><span class="co"># (možete se poslužiti funkcijom iz prethodnog zadatka)</span></span>
<span id="cb269-6"><a href="korisnik.html#cb269-6" tabindex="-1"></a></span>
<span id="cb269-7"><a href="korisnik.html#cb269-7" tabindex="-1"></a><span class="co"># ispišite varijablu `Pero` uz pomoć generičke funkcije `print`</span></span></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="korisnik.html#cb270-1" tabindex="-1"></a><span class="co"># provjerite da li je print generička funkcija </span></span>
<span id="cb270-2"><a href="korisnik.html#cb270-2" tabindex="-1"></a><span class="co"># (jednostavno ispišite njezin izvorni kod navođenjem samog imena funkcije)</span></span>
<span id="cb270-3"><a href="korisnik.html#cb270-3" tabindex="-1"></a>print</span>
<span id="cb270-4"><a href="korisnik.html#cb270-4" tabindex="-1"></a></span>
<span id="cb270-5"><a href="korisnik.html#cb270-5" tabindex="-1"></a><span class="co"># omogućite ispis klase `Osoba` uz pomoć generičke funkcije `print`</span></span>
<span id="cb270-6"><a href="korisnik.html#cb270-6" tabindex="-1"></a><span class="co"># (možete se poslužiti funkcijom iz prethodnog zadatka)</span></span>
<span id="cb270-7"><a href="korisnik.html#cb270-7" tabindex="-1"></a>print.Osoba <span class="ot">&lt;-</span> ispisi.Osoba</span>
<span id="cb270-8"><a href="korisnik.html#cb270-8" tabindex="-1"></a></span>
<span id="cb270-9"><a href="korisnik.html#cb270-9" tabindex="-1"></a></span>
<span id="cb270-10"><a href="korisnik.html#cb270-10" tabindex="-1"></a><span class="co"># ispišite varijablu `Pero` uz pomoć generičke funkcije `print`</span></span>
<span id="cb270-11"><a href="korisnik.html#cb270-11" tabindex="-1"></a><span class="fu">print</span>(pero)</span></code></pre></div>
<pre><code>## function (x, ...) 
## UseMethod(&quot;print&quot;)
## &lt;bytecode: 0x0000023167435cc0&gt;
## &lt;environment: namespace:base&gt;
## OIB: 12345678 , Prezime: Peric , tezina: 78</code></pre>
</div>
<hr />
<p>Za kraj, prikažimo mogućnost R-a da nam izlista sve trenutno poznate implementacije neke generičke metode. Za to se jednostavno koristimo funkcijom <code>methods</code> kojoj proslijedimo ime dotične metode. Istom funkcijom možemo i provjeriti koje sve implementacije generičkih funkcija postoje za određenu klasu. Za to koristimo parametar <code>class</code> kojem prosljeđujemo naziv klase za koju tražimo spomenute implementacije.</p>
<hr />
<p><strong>Zadatak 7.9 - funkcija <code>methods</code></strong></p>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="korisnik.html#cb272-1" tabindex="-1"></a><span class="co"># prikažite sve do sad poznate implementacije generičke funkcije `summary`</span></span>
<span id="cb272-2"><a href="korisnik.html#cb272-2" tabindex="-1"></a></span>
<span id="cb272-3"><a href="korisnik.html#cb272-3" tabindex="-1"></a><span class="co"># provjerite koje sve implementacije generičkih funkcija postoje za klasu `factor`</span></span></code></pre></div>
<div class="fold s o">
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="korisnik.html#cb273-1" tabindex="-1"></a><span class="co"># prikažite sve do sad poznate implementacije generičke funkcije `summary`</span></span>
<span id="cb273-2"><a href="korisnik.html#cb273-2" tabindex="-1"></a><span class="co">#methods(summary)   # probati na konzoli</span></span>
<span id="cb273-3"><a href="korisnik.html#cb273-3" tabindex="-1"></a></span>
<span id="cb273-4"><a href="korisnik.html#cb273-4" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;-----------------------</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb273-5"><a href="korisnik.html#cb273-5" tabindex="-1"></a></span>
<span id="cb273-6"><a href="korisnik.html#cb273-6" tabindex="-1"></a><span class="co"># provjerite koje sve implementacije generičkih funkcija postoje za klasu `factor`</span></span>
<span id="cb273-7"><a href="korisnik.html#cb273-7" tabindex="-1"></a><span class="fu">methods</span>(<span class="at">class =</span> <span class="st">&quot;factor&quot;</span>)</span></code></pre></div>
<pre><code>## -----------------------
##  [1] -             /             [             [[            [[&lt;-         
##  [6] [&lt;-           +             all.equal     Arith         as.character 
## [11] as.data.frame as.Date       as.duration   as.interval   as.list      
## [16] as.logical    as.period     as.POSIXlt    as.vector     as_date      
## [21] as_datetime   as_factor     brief         c             cbind2       
## [26] coerce        Compare       corresp       droplevels    fixed        
## [31] format        gausspr       histogram     initialize    inlearn      
## [36] is.na&lt;-       kqr           kronecker     ksvm          length&lt;-     
## [41] levels&lt;-      Logic         lssvm         Math          Ops          
## [46] output_column plot          print         rbind2        recode       
## [51] relevel       relist        rep           rvm           scale_type   
## [56] show          slotsFromS3   summary       Summary       type_sum     
## [61] xtfrm        
## see &#39;?methods&#39; for accessing help and source code</code></pre>
</div>
<hr />
</div>
</div>
<div id="zadaci-za-vježbu-5" class="section level2 unnumbered hasAnchor">
<h2>Zadaci za vježbu<a href="korisnik.html#zadaci-za-vježbu-5" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li><p>R ima funkciju <code>which</code> koja pretvara logički vektor u numerički sa rednim brojevima elemenata koji su <code>TRUE</code> (tako <code>c(T, F, F, F, F, T, F, T)</code> postaje <code>c(1, 6, 8)</code>). Implementirajte vlastitu inačicu ove funkcije.</p></li>
<li><p>Uzmimo numerički vektor x duljine n. U statistici standardiziranim momentom k-tog reda zovemo vrijednost:</p></li>
</ol>
<p><span class="math display">\[\frac{1}{n}\sum_{i=1}^n{(x_i - \bar{x})}^{k+1}\]</span></p>
<p>Stvorite generator funkcija <code>moment(k)</code> koji će stvarati funkcije za računanje standardiziranog centralnog momenta k-tog reda. Stvorite funkcije <code>nulti_moment(x)</code> i <code>prvi_moment(x)</code> sa vrijednosti parametra <code>k</code> redom <code>0</code> i <code>1</code>. Testirajte funkcije na vektoru <code>1:1000</code>. Usporedite rezultate koje daje funkcija <code>sd</code> (standardna devijacija) nad vektorom <code>1:1000</code> i korijen rezultata funkcije <code>prvi_moment</code> nad istim vektorom.</p>
<ol start="3" style="list-style-type: decimal">
<li>Implementirajte konstruktor klase <code>Zaposlenik</code> koja nasljeđuje objekt klase <code>Osoba</code> sa sljedećom konstruktorskom funkcijom i funkcijom ispisa:</li>
</ol>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="korisnik.html#cb275-1" tabindex="-1"></a>Osoba <span class="ot">&lt;-</span> <span class="cf">function</span>(oib, prezime, tezina) {</span>
<span id="cb275-2"><a href="korisnik.html#cb275-2" tabindex="-1"></a>    o <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">oib =</span> oib, <span class="at">prezime =</span> prezime, <span class="at">tezina =</span> tezina)</span>
<span id="cb275-3"><a href="korisnik.html#cb275-3" tabindex="-1"></a>    <span class="fu">class</span>(o) <span class="ot">&lt;-</span> <span class="st">&quot;Osoba&quot;</span></span>
<span id="cb275-4"><a href="korisnik.html#cb275-4" tabindex="-1"></a>    o</span>
<span id="cb275-5"><a href="korisnik.html#cb275-5" tabindex="-1"></a>}</span>
<span id="cb275-6"><a href="korisnik.html#cb275-6" tabindex="-1"></a></span>
<span id="cb275-7"><a href="korisnik.html#cb275-7" tabindex="-1"></a>print.Osoba <span class="ot">&lt;-</span> <span class="cf">function</span>(o) {</span>
<span id="cb275-8"><a href="korisnik.html#cb275-8" tabindex="-1"></a>    rez <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;OIB:&quot;</span>, o<span class="sc">$</span>oib, <span class="st">&quot;, Prezime:&quot;</span>, o<span class="sc">$</span>prezime, <span class="st">&quot;, tezina:&quot;</span>, o<span class="sc">$</span>tezina, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb275-9"><a href="korisnik.html#cb275-9" tabindex="-1"></a>    <span class="fu">cat</span>(rez)</span>
<span id="cb275-10"><a href="korisnik.html#cb275-10" tabindex="-1"></a>}</span></code></pre></div>
<p><code>Zaposlenik</code> uz atribute klase <code>Osoba</code> ima i atribut <code>nadredjeni</code> koji predstavlja referencu na nadređenog zaposlenika (ukoliko postoji, inače je <code>NA</code>).</p>
<p>Stvorite dva objekta klase <code>Zaposlenik</code> (jedan nadređen drugom) i ispišite ih uz pomoć funkcije <code>print</code>. Potom implementirajte vlastitu inačicu generičke funkcije <code>print</code> za klasu <code>Zaposlenik</code> koja ispisuje podatke o zaposleniku i podatke o nadređenom zaposleniku (ako postoji, inače ispisuje poruku da nema nadređenog zaposlenika). Ponovo ispišite oba zaposlenika uz pomoć funkcije <code>print</code>.</p>
<hr />
<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Programirajmo u R-u</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="https://www.fer.unizg.hr/en/damir.pintar" property="cc:attributionName" rel="cc:attributionURL">Damir Pintar</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a>.<br />Based on a work at <a xmlns:dct="http://purl.org/dc/terms/" href="https://ratnip.github.io/FER_OPJR/" rel="dct:source">https://ratnip.github.io/FER_OPJR/</a></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="paketi.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"],
"google": false,
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed",
"edit": null,
"download": null,
"search": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
